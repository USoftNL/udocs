"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[90135],{2248:(e,n,t)=>{t.d(n,{A:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAcCAMAAAA5tTN/AAAAV1BMVEX////z9vuNqdtehsxEcsRZgsuKp9rw9PphiM1bhMuQrNxojc/G1O3q8PmEotiVr91bg8vx9Pvd5vSjuuLk6/aww+b4+f28zOrW4PJxlNLO2u9mi85Wf8o8rHOIAAABEUlEQVRIx+2W2w6CMAyGq1bwsFEOGwz1/Z/T7qATA0ESZmJiL7aF/vvY/vZiAD8bm+0O1459ljv0YXWyjeOG2dskaMQTs8+J2GdmJ0Ij/tmzbGGbUhZIrvEJ3SRCshQVQN2gclv4swAvlNqTonScTUSq5S0dL0oEw1MfkrLVRN07m4UCLjiUjrN5qC2bMACeoaHxiyHbCg2UODzzlCetDp6Ei1L8L+fVCFs/7KMZT6oagyfhomVk92Qm2S/SSU+scNoTobxxPXSLPeGhUrGWbkNRxFrWNmlswfuXWopPa8kHf/agYyvle9BwD8oOsZGuURf24KrxZ3+dfU2EvjI7S8TOmJ3vk6Bv7hGRZ8neJ+niDjGRKvjoxqcfAAAAAElFTkSuQmCC"},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(96540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},31124:(e,n,t)=>{t.d(n,{A:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAaCAMAAADBqfHwAAABmFBMVEUAAABNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJaWlBsbGNnZ15OTkPj4+J8fHSysq7c3NpkZFqzs67b29nn5+XW1tS+vrqGhn/AwL3////x8fBxcWmsrKeHh4Dk5OLZ2dZ9fXV2dm1oaF7s7Ovl5ePQ0M7z8/O1tbB6enKOjoeTk4yJiYKAgHi8vLj4+Pjf393AwLzR0c7e3tygoJrh4d+FhX6xsayKioPV1dO6urZ0dGt/f3fOzsuhoZvT09G9vbns7Oqvr6rY2Naiop3MzMibm5Wjo53v7+7Hx8R+fnb+/v6lpaD4+Pfw8O+rq6aqqqXT09BcXFLa2tdxcWhRUUednZfX19WYmJLm5uWSkovl5eRtbWT8/Pz19fSkpJ7d3du/v7vn5+a3t7JdXVODg3uEhHy1tbH9/f22trHKysfLy8inp6Ktrainp6HPz8ywsKvJycWLi4Senph/f3hUVEqpqaNra2Lq6ulSUkdjY1lWVktlZVtWVkxTU0lpaWBeXlRPT0SCxIduAAAAD3RSTlMAQazpBJmaBUKt6q5DnZ4l/YOTAAABu0lEQVRIx8XVZ1PbQBAG4MNADDbhpZjeXmOqwXSHBAMJEEzvHVNimoCEQAqkkACh/u2cdGA+eRwPN5P9IO3O7Ty6045GQgiRYEvE0yPRliDMSErWgKl4ZpeePk6C8rAaOSBF2LR6qULHKB7DIbRywP/yMjKz4vWyXa4cINeVB+QXFBYVl5Q+rpWR7nKPJ1JXVFappKqoOqpH1kiPlaj1sq7ex4bIUiPZ1NxC933Z2ubnCzNpf0nG9F6hgwFZd3YB3e2v3/SgN0B/39t+uoNBq7OFVN4AY3qDHMIwOTIqc4xxfIKc7PVzyj89w6mZ2fveOeUBMb15LmBxieYOlkNkI1a4ijX6zF2tR3r/3ZuWHvAuGCYbNrgJ9HDrwSuMy4OX28AODewuy2qPq/tkBt4zrLwPXIrPO+DHwyM5SXzi0ecvXn7FMU9av9GjvHLy+w+r8acRoM+QDzcMst5YjOKdylVu/gK6zLmFh4HfkucBlIc+8sxq7DZfL0vUfMloHnB+sa+SP5dXKrm+sW6hkHm9ur1DjND+/Tq0cg6RqtVzihStXpoQzzVy6fL/ZtcHptutP3CaU8dQHE55WPEX1X6sEAztWfcAAAAASUVORK5CYII="},47193:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Extensions/JSON_internal_component/JSONImport","title":"JSON.Import","description":"This article is about the Import method of the JSON internal component.","source":"@site/docs/Extensions/JSON_internal_component/JSONImport.md","sourceDirName":"Extensions/JSON_internal_component","slug":"/Extensions/JSON_internal_component/JSONImport","permalink":"/udocs/Extensions/JSON_internal_component/JSONImport","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"JSONImport"},"sidebar":"sidebar","previous":{"title":"JSON.Export","permalink":"/udocs/Extensions/JSON_internal_component/JSONExport"},"next":{"title":"JSON.MultiExportTables","permalink":"/udocs/Extensions/JSON_internal_component/JSONMultiExportTables"}}');var s=t(74848),i=t(28453);const a={id:"JSONImport"},o="JSON.Import",l={},d=[{value:"<strong>JSON.Import</strong>",id:"jsonimport-1",level:2},{value:"Parameters",id:"parameters",level:2},{value:"VerifyOriginalValues",id:"verifyoriginalvalues",level:2},{value:"The returning JSON object",id:"the-returning-json-object",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"jsonimport",children:"JSON.Import"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(2248).A+"",width:"91",height:"28"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["This article is about the ",(0,s.jsx)(n.strong,{children:"Import"})," method of the ",(0,s.jsx)(n.a,{href:"/Extensions/JSON_internal_component",children:"JSON internal component"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"jsonimport-1",children:(0,s.jsx)(n.strong,{children:"JSON.Import"})}),"\n",(0,s.jsxs)(n.p,{children:["Imports data presented in the ",(0,s.jsx)(n.a,{href:"/udocs/Repositories/USoft_JSON_format/",children:"USoft JSON format"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(31124).A+"",width:"79",height:"26"})}),"\n",(0,s.jsx)(n.p,{children:"Imports base64-encoded binary data (of the BLOB data type)."}),"\n",(0,s.jsx)(n.p,{children:"IgnoreGUK parameter has been added."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:'Processes the row elements found in the JSON document one-by-one in document order. The default behaviour is "UPSERT" handling:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A record is INSERTed if no record with the same primary key is found in the target table."}),"\n",(0,s.jsx)(n.li,{children:"No action is taken if a record with the same primary key, and no different values in other columns, is found in the target table."}),"\n",(0,s.jsx)(n.li,{children:"A record is UPDATEd if a record with the same primary key, but different values in other columns, is found in the target table."}),"\n",(0,s.jsx)(n.li,{children:"No record is DELETEd."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This \u201cUPSERT\u201d handling may be modified by ",(0,s.jsx)(n.a,{href:"/udocs/Repositories/USoft_JSON_format/Metainstruction_properties_in_JSON",children:"meta-instruction properties"}),", namely the ",(0,s.jsx)(n.strong,{children:"@usoft-json"})," meta-instruction property supplied at the top of the import document, and ",(0,s.jsx)(n.strong,{children:"@Insert"}),", ",(0,s.jsx)(n.strong,{children:"@Update"})," and ",(0,s.jsx)(n.strong,{children:"@Delete"})," meta-instruction properties supplied inside record entries. It may also be modified by the VerifyOriginalValues and UseIOFormats parameters of JSON.Import itself."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Syntax"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INVOKE JSON.Import WITH\nSELECT      *value    parameter*\n,           *value    parameter* ...\n,           *expression* JSONDocument\nFROM        *table*\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The required SELECT output-list is made up of 0 or more ",(0,s.jsx)(n.em,{children:"value\xa0parameter"})," pairs and 1 required (SQL) ",(0,s.jsx)(n.em,{children:"expression"}),", which may be named by the optional JSONDocument alias. Possible values for the ",(0,s.jsx)(n.em,{children:"value\xa0parameter"})," pairs are listed in the table in the Parameters section below."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Expression"})," is usually either a filepath pointing to a file on the file system, in which case the optional FROM clause is typically omitted (Example 1), or an inline JSON document (Example 3 further down in this article). If ",(0,s.jsx)(n.em,{children:"expression"})," refers to a database column (Example 2), the possible values for ",(0,s.jsx)(n.em,{children:"expression"})," are:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"*column*\nOLD( *column* )\n"})}),"\n",(0,s.jsx)(n.p,{children:"Other SQL functions than OLD() are not supported. OLD() is not typical in this context."}),"\n",(0,s.jsxs)(n.p,{children:["It is customary, but not mandatory, to mention ",(0,s.jsx)(n.em,{children:"value parameter"})," pairs before ",(0,s.jsx)(n.em,{children:"expression"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Example 1"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INVOKE  JSON.Import WITH\nSELECT  'c:\\temp\\tours.json'\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Example 2"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INVOKE    JSON.Import WITH\nSELECT    'yes'          UseIOFormats\n,         description    JSONDocument\nFROM      tour\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.p,{children:["This table lists ",(0,s.jsx)(n.em,{children:"value\xa0parameter"})," pairs supported in the SELECT output lists passed to JSON.Import. Possible ",(0,s.jsx)(n.em,{children:"values"})," are listed by ",(0,s.jsx)(n.em,{children:"parameter"}),"; the default ",(0,s.jsx)(n.em,{children:"value"})," (if any) is underlined. The use of each parameter is optional. If you do not specify a given parameter and it has a default value associated with it, that is the value applied."]}),"\n",(0,s.jsxs)(n.p,{children:["Both ",(0,s.jsx)(n.em,{children:"value"})," and ",(0,s.jsx)(n.em,{children:"parameter"})," are case-insensitive."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"value"})})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"parameter"})})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Description"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ yes\xa0|\xa0no\xa0}"})}),(0,s.jsx)(n.td,{children:"IgnoreGUK"}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)(n.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,s.jsxs)("p",{children:["If you specify 'no' for this parameter, if the external file contains ",(0,s.jsx)(n.a,{href:"/udocs/Repositories/Introducing_repositories/Globally_Unique_Keys_G_U_Ks",children:"G_U_K"})," attributes, these are heeded as identifiers of the records instead of the record's primary key values. This replaces ",(0,s.jsx)(n.a,{href:"/udocs/Repositories/Data_flow_control_with_XML_or_JSON/How_import_XML_or_JSON_is_processed",children:"default import handling"})," by the handling on the basis of G_U_Ks."]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{ yes\xa0|\xa0no\xa0}"})}),(0,s.jsx)(n.td,{children:"UseIOFormats"}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)(n.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,s.jsx)("p",{children:"If you specify 'yes' for this parameter, the imported column values are checked against the IO format of the corresponding domain. Otherwise, they must use the format described in \"JSON Representation of Date Values\"."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"{\xa0No |\xa0ChangedColumns |\xa0 AllColumns |\xa0 NoCheckOnPk }"})}),(0,s.jsx)(n.td,{children:"VerifyOriginalValues"}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)(n.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,s.jsxs)("p",{children:["For row elements with an Update or Delete instruction tag, this parameter specifies whether values in the JSON data must be compared with values currently in the database before an attempt is made to execute the instruction.",(0,s.jsx)("br",{}),'\t\t\tSee the "VerifyOriginalValues" section below for the meaning of each possible value.']})]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"verifyoriginalvalues",children:"VerifyOriginalValues"}),"\n",(0,s.jsx)(n.p,{children:"Setting the VerifyOriginalValues parameter allows optimistic locking mechanisms and prevents lost updates if different client applications change the same information concurrently."}),"\n",(0,s.jsx)(n.p,{children:"The VerifyOriginalValues parameter has an effect only on records in the JSON data that contain an Update or Delete instruction tag. It determines whether or not the Rules Engine will perform 2 types of check before attempting the import instructions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A check whether a record with the ",(0,s.jsx)(n.strong,{children:"primary key value"})," mentioned in the JSON actually exists in the database."]}),"\n",(0,s.jsxs)(n.li,{children:["A check that ",(0,s.jsx)(n.strong,{children:"old values"})," mentioned in the JSON are the same as the old values in the database record."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If any of these checks is performed and fails, a blocking error is raised, causing the import operation to be unsuccessful."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Old values"})," are non-primary-key values mentioned in the JSON or found in the database ",(0,s.jsx)(n.em,{children:"before"})," the Update or Delete. In the USoft JSON format, old values are optional. By default, in an Update instruction, the old values are mentioned for each of the columns that are to be updated."]}),"\n",(0,s.jsx)(n.p,{children:"The values of the VerifyOriginalValues parameter have the following meaning:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"value"})})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Description"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"No (the default)"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)("p",{children:"If a record with the primary key value does not exist, an error is raised."}),(0,s.jsx)("p",{children:"If a record with the primary key value does exist, old values in the JSON (if any) are not checked against old values in the database."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"NoCheckOnPk"}),(0,s.jsxs)(n.td,{children:[(0,s.jsxs)("p",{children:["If a record with the primary key value does not exist, the instruction is ",(0,s.jsx)(n.strong,{children:"silently ignored"}),"."]}),(0,s.jsx)("p",{children:"If a record with the primary key value does exist, old values in the JSON (if any) are not checked against old values."})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AllColumns"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)("p",{children:"If a record with the primary key value does not exist, an error is raised."}),(0,s.jsxs)("p",{children:["If a record with the primary key value does exist, old values in the JSON (if any) ",(0,s.jsx)(n.strong,{children:"are"})," checked against old values in the database. An error is raised if the values are not the same."]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ChangedColumns"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)("p",{children:"If a record with the primary key value does not exist, an error is raised."}),(0,s.jsxs)("p",{children:["If a record with the primary key value does exist, old values in the JSON (if any) ",(0,s.jsx)(n.strong,{children:"are"})," checked against old values in the database but only for ",(0,s.jsx)(n.strong,{children:"changed columns"}),". An error is raised if the values are not the same."]}),(0,s.jsxs)("p",{children:["A ",(0,s.jsx)(n.strong,{children:"changed column"})," is a column for which the instruction is to replace the old value by a different new value."]}),(0,s.jsxs)("p",{children:["With an Update instruction tag, only columns mentioned in the ",(0,s.jsx)(n.code,{children:"<Update>"})," child element are changed columns."]}),(0,s.jsx)("p",{children:"With a Delete instruction tag, all columns are changed columns."})]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Example 3"})}),"\n",(0,s.jsx)(n.p,{children:"In this example, a blocking error is raised if one or more of the following apply:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"There is no PERSON database record with ID = 112."}),"\n",(0,s.jsx)(n.li,{children:"There is no PERSON database record with ID = 203."}),"\n",(0,s.jsx)(n.li,{children:'There is a PERSON database record with ID = 112, but either its FAMILY_NAME value is other than "Smith" or its FIRST_NAME value is other than "John" (or both).'}),"\n",(0,s.jsx)(n.li,{children:'There is a PERSON database record with ID = 203, but either its FAMILY_NAME value is other than "Sutcliff" or its FIRST_NAME value is other than "Bill" (or both).'}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'INVOKE    JSON.Import WITH\nSELECT    \'{ "PERSON":[\n                "ID":112\n             ,  "FAMILY_NAME":"Smith"\n             ,  "FIRST_NAME":"John"\n             ,  "@Update":{\n                   "FIRST_NAME":"Johnny"\n                }\n             ],\n             "PERSON":[\n                "ID":203\n             ,  "FAMILY_NAME":"Sutcliff"\n             ,  "FIRST_NAME":"Bill"\n             ,  "@Delete":{}\n             ]\n          }\' JSONDocument\n,         \'AllColumns\' VerifyOriginalValues\n'})}),"\n",(0,s.jsx)(n.h2,{id:"the-returning-json-object",children:"The returning JSON object"}),"\n",(0,s.jsx)(n.p,{children:"The JSON.Import method returns a result JSON object."}),"\n",(0,s.jsx)(n.p,{children:"This object contains an entry for each record that has been inserted or updated directly by the import. Column values shown in the result JSON are those that apply after the record has been processed:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sequence numbers have been calculated."}),"\n",(0,s.jsx)(n.li,{children:"Productive single-record and multi-record constraints have executed."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Since only records inserted or updated directly by the import are included, any effects that productive multi-record constraints may have had on other records are not visible in the result document."}),"\n",(0,s.jsx)(n.p,{children:"If the import has not caused any record to be inserted or updated, the result document contains only a root element."})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);