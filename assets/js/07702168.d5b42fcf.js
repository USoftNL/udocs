"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[91692],{28453:(e,a,t)=>{t.d(a,{R:()=>r,x:()=>l});var n=t(96540);const s={},o=n.createContext(s);function r(e){const a=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:a},e.children)}},39219:(e,a,t)=>{t.d(a,{A:()=>n});const n="data:image/png;base64,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"},94777:(e,a,t)=>{t.d(a,{A:()=>n});const n="data:image/png;base64,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"},98905:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Web_and_app_UIs/Data_sources/SQLDataSources","title":"SQLDataSources","description":"This article is about a special type of data source called SQLDataSource that allows you to write your own SQL to get data from the database.","source":"@site/docs/Web_and_app_UIs/Data_sources/SQLDataSources.md","sourceDirName":"Web_and_app_UIs/Data_sources","slug":"/Web_and_app_UIs/Data_sources/SQLDataSources","permalink":"/udocs/Web_and_app_UIs/Data_sources/SQLDataSources","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"USoft10","permalink":"/udocs/tags/u-soft-10"}],"version":"current","frontMatter":{"id":"SQLDataSources","tags":["USoft10"]},"sidebar":"sidebar","previous":{"title":"Embedded data sources","permalink":"/udocs/Web_and_app_UIs/Data_sources/Embedded_data_sources"},"next":{"title":"Data source path syntax","permalink":"/udocs/Web_and_app_UIs/Data_sources/Data_source_path_syntax"}}');var s=t(74848),o=t(28453);const r={id:"SQLDataSources",tags:["USoft10"]},l="SQLDataSources",i={},c=[{value:"When to use?",id:"when-to-use",level:2},{value:"Defining a SQLDataSource",id:"defining-a-sqldatasource",level:2},{value:"Catching a SQLDataSource result value",id:"catching-a-sqldatasource-result-value",level:2},{value:"Executing a SQLDataSource",id:"executing-a-sqldatasource",level:2},{value:"Displaying a result value in a field",id:"displaying-a-result-value-in-a-field",level:3},{value:"Using the result value programmatically",id:"using-the-result-value-programmatically",level:3},{value:"Example: SQLDataSource embedded in a larger structure",id:"example-sqldatasource-embedded-in-a-larger-structure",level:2},{value:"USoft 9 alternative for SQLDataSource",id:"usoft-9-alternative-for-sqldatasource",level:2}];function u(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"sqldatasources",children:"SQLDataSources"})}),"\n",(0,s.jsxs)(a.p,{children:["This article is about a special type of data source called ",(0,s.jsx)(a.strong,{children:"SQLDataSource"})," that allows you to write your own SQL to get data from the database."]}),"\n",(0,s.jsx)(a.p,{children:"This is a temporary edit."}),"\n",(0,s.jsx)(a.h2,{id:"when-to-use",children:"When to use?"}),"\n",(0,s.jsxs)(a.p,{children:["SQLDataSources are especially useful for more complex queries that you cannot easily express by ",(0,s.jsx)(a.a,{href:"/udocs/Web_and_app_UIs/SQL_and_Web_Designer/Modifying_underlying_SQL_of_TableDataSources",children:"modifying the underlying SQL of standard TableDataSources"}),". Complex join constructs, calls to RDMI components, and job calls (especially if you are interested in output data returned by the job) are in this category."]}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.code,{children:"USoft 9.x``{.vs_10}"})}),"\n",(0,s.jsx)(a.p,{children:"SQLDataSources are a USoft 10 feature. They are not available in USoft 9.x and earlier. To catch and use query result data in your USoft 9 web pages, see the USoft 9 alternative to SQLDataSources below."}),"\n",(0,s.jsx)(a.hr,{}),"\n",(0,s.jsx)(a.h2,{id:"defining-a-sqldatasource",children:"Defining a SQLDataSource"}),"\n",(0,s.jsx)(a.p,{children:"To define a SQLDataSource:"}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsx)(a.li,{}),"\n",(0,s.jsx)(a.li,{}),"\n",(0,s.jsx)(a.li,{}),"\n"]}),"\n",(0,s.jsx)(a.admonition,{type:"tip",children:(0,s.jsxs)(a.p,{children:["You can write any SQL statement, but it is customary to view data sources as a strategy for making data available in your web page. For this reason, to write\xa0 manipulation SQL (INSERT, UPDATE, DELETE statements), USoft suggests you use ",(0,s.jsx)(a.a,{href:"/udocs/Web_and_app_UIs/SQL_and_Web_Designer/executeSQLStatement_actions",children:"executeSQLStatement actions"})," instead."]})}),"\n",(0,s.jsx)(a.h2,{id:"catching-a-sqldatasource-result-value",children:"Catching a SQLDataSource result value"}),"\n",(0,s.jsx)(a.p,{children:'If you wrote a SELECT statement, you want to \u201ccatch\u201d the retrieved data for use in your web page. Also, if you wrote an INVOKE or SELECT statement calling a job or RDMI component, you might want to "catch\u201d returned output values.'}),"\n",(0,s.jsx)(a.p,{children:'To "catch\u201d SQLDataSource result values, for each output column, you need to insert a TableColumn object:'}),"\n",(0,s.jsxs)(a.p,{children:["1.\xa0From the Controls tab of the catalog, drag a ",(0,s.jsx)(a.strong,{children:"TableColumn"})," object onto the SQLDataSource object in the object tree."]}),"\n",(0,s.jsxs)(a.ol,{start:"2",children:["\n",(0,s.jsx)(a.li,{children:"For this new TableColumn object, change the name and optionally set other properties."}),"\n"]}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["Name the TableColumn after a column or column alias used in the SQLDataSource\u2019s SQL property, e.g., ",(0,s.jsx)(a.strong,{children:"RESULT"}),"."]}),"\n",(0,s.jsx)(a.li,{children:"You do not necessarily need a TableColumn for each output column in the SQL statement."}),"\n",(0,s.jsx)(a.li,{children:"Output columns in the SQL statement are matched to inserted TableColumns first by alias, then by name, and lastly by position (i.e., order of appearance in the statement)."}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"The top area of the object tree should now look something like this:"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:t(94777).A+"",width:"217",height:"66"})}),"\n",(0,s.jsx)(a.h2,{id:"executing-a-sqldatasource",children:"Executing a SQLDataSource"}),"\n",(0,s.jsx)(a.p,{children:"A SQLDataSource is only the definition of a SQL statement that you want to put to use in a web GUI."}),"\n",(0,s.jsxs)(a.p,{children:["To effectively put it to use, you need to ",(0,s.jsx)(a.strong,{children:"execute"})," the data source by calling ",(0,s.jsx)(a.strong,{children:"executeQuery()."})]}),"\n",(0,s.jsx)(a.h3,{id:"displaying-a-result-value-in-a-field",children:"Displaying a result value in a field"}),"\n",(0,s.jsx)(a.p,{children:"To display the result value of a SQLDataSource in a field:"}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:"Insert a in the web page."}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:"Set its  property to the name of the SQLDataSource object and its  property to the name of the inserted TableColumn that maps to the result value."}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsx)(a.p,{children:"Do something that executes the datasource:"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["You can add an event listener, for example with Event Type = ",(0,s.jsx)(a.strong,{children:"load"}),", that calls the ",(0,s.jsx)(a.strong,{children:"executeQuery"})," action for the data source."]}),"\n",(0,s.jsxs)(a.li,{children:["You can set the ",(0,s.jsx)(a.strong,{children:"Initial State"})," property of the SQLDataSource to ",(0,s.jsx)(a.strong,{children:"QueryRecords"}),"."]}),"\n"]}),"\n",(0,s.jsx)(a.h3,{id:"using-the-result-value-programmatically",children:"Using the result value programmatically"}),"\n",(0,s.jsx)(a.p,{children:"To use the result value of a SQLDataSource programmatically, use code like the following snippet, which displays a result value in an alert box:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-js",children:'$.udb(\'MySQLDataSource\').executeQuery().then(function(dsc){\n\talert(dsc.rows("current").cols("RESULT").val());\n});\n'})}),"\n",(0,s.jsx)(a.h2,{id:"example-sqldatasource-embedded-in-a-larger-structure",children:"Example: SQLDataSource embedded in a larger structure"}),"\n",(0,s.jsx)(a.p,{children:"This section shows an example of how you can enrich a standard structure of TableDataSources by embedding an added SQLDataSource in it. In this particular example, the SQLDataSource is responsible for calling a job. The successful execution of this job is a condition for navigating back to the original page from where you called the lookup."}),"\n",(0,s.jsx)(a.p,{children:"A SQLDataSource with Name = BookRepeatTrip has a SQL statement that calls a job:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT   BatchRunner.REPEAT_TRIP(\n         :RES_ID RES_ID\n,        :TOUR_ID TOUR_ID\n,        'True' \"-quiet\"\n)        AS RES_ID\n"})}),"\n",(0,s.jsx)(a.p,{children:"This SQLDataSource is inserted in a standard lookup page (containing a standard lookup TableDataSource, not shown):"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:t(39219).A+"",width:"229",height:"34"})}),"\n",(0,s.jsx)(a.p,{children:"Through the following script, the Select button in the lookup page calls the job. This call returns a result value on success. If the job is successful, the user returns to the calling page, where the result value is used as a search condition:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-js",children:"$.udb('BookRepeatTrip').executeQuery(\n  {\n    hostvars: {\n      RES_ID: $.udb('../V_RESERVATION').rows('current').cols('RES_ID').val(),\n      TOUR_ID: $.udb('TOUR').rows('current').cols('TOUR_ID').val()\n    },\n    success: function(){\n      $.udb.acceptLookupValue().then(function(){\n      $.udb('V_RESERVATION').executeQuery();});\n    }\n  }\n)\n"})}),"\n",(0,s.jsx)(a.h2,{id:"usoft-9-alternative-for-sqldatasource",children:"USoft 9 alternative for SQLDataSource"}),"\n",(0,s.jsx)(a.admonition,{type:"warning",children:(0,s.jsx)(a.p,{children:"On USoft 10, use a SQLDataSource. The explanation below is for the benefit of USoft 9 developers and developers dealing with upgraded USoft 9 applications that use this technique. This technique is likely to become obsolete in USoft 11."})}),"\n",(0,s.jsx)(a.p,{children:'To "catch\u201d result record values of a SELECT statement:'}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsx)(a.li,{children:"Insert a VariableSetDataSource object in your page."}),"\n",(0,s.jsx)(a.li,{children:"Set the Output Data Source Name property of the executeSQLStatement() action to the name of this VariableSetDataSource."}),"\n",(0,s.jsx)(a.li,{children:"Access the result data in the VariableSetDataSource as you would access data held by any other data source."}),"\n"]})]})}function d(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);