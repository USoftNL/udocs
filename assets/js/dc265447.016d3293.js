"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[91480],{17442:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"Web_and_app_UIs/UI_Library/Handlebars","title":"Handlebars","description":"----","source":"@site/docs/Web_and_app_UIs/UI_Library/Handlebars.md","sourceDirName":"Web_and_app_UIs/UI_Library","slug":"/Web_and_app_UIs/UI_Library/Handlebars","permalink":"/udocs/Web_and_app_UIs/UI_Library/Handlebars","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"USoft11","permalink":"/udocs/tags/u-soft-11"},{"inline":true,"label":"USoft10","permalink":"/udocs/tags/u-soft-10"}],"version":"current","frontMatter":{"id":"Handlebars","tags":["USoft11","USoft10"]},"sidebar":"sidebar","previous":{"title":"Factories","permalink":"/udocs/Web_and_app_UIs/UI_Library/Factories"},"next":{"title":"Field validation","permalink":"/udocs/Web_and_app_UIs/UI_Library/Field_validation"}}');var r=t(74848),s=t(28453);const l={id:"Handlebars",tags:["USoft11","USoft10"]},i="Handlebars",d={},o=[{value:"attr helper",id:"attr-helper",level:2},{value:"\u201c*\u201d argument",id:"-argument",level:3},{value:"attr=&quot;literal&quot; argument",id:"attrliteral-argument",level:3},{value:"attr=&quot;p.prop&quot; argument",id:"attrpprop-argument",level:3},{value:"<code>attr=&quot;[c]:t[:f]&quot;</code> argument",id:"attrctf-argument",level:3},{value:"attr=&quot;v1 v2&quot; argument",id:"attrv1-v2-argument",level:3},{value:"data helper",id:"data-helper",level:2},{value:"lang helper",id:"lang-helper",level:2},{value:"Short notation",id:"short-notation",level:3},{value:"now helper",id:"now-helper",level:2},{value:"preview helper",id:"preview-helper",level:2},{value:"rule helper",id:"rule-helper",level:2},{value:"Escaping handlebars",id:"escaping-handlebars",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"handlebars",children:"Handlebars"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"USoft 11``{.vs_11}"})}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["This article describes the USoft 10 product only.\nIn USoft 11, the web UI API was revised and improved. For full details, go to:\n",(0,r.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/Revised_web_UI_API_in_USoft_11",children:"Revised web UI API in USoft 11"})]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"USoft 10``{.vs_10}"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["This article covers ",(0,r.jsx)(n.strong,{children:"handlebars"})," as a way of getting USoft UI controls from jQuery expressions. This is part of the ",(0,r.jsx)(n.a,{href:"/Web_and_app_UIs/UI_Library",children:"UI Library"}),".\nThe UI Library is a mixed bag of Javascript extensions for programming UI controls in USoft web pages. Do not confuse with the structured ",(0,r.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/UDB_udb_object",children:"UDB object model"})," for data exchange between USoft web pages and a Rules Engine."]})}),"\n",(0,r.jsxs)(n.p,{children:["USoft Web Designer uses ",(0,r.jsx)(n.strong,{children:"handlebars"})," to create HTML within its class factories. Documentation on Handlebars can be found on ",(0,r.jsx)(n.a,{href:"http://handlebarsjs.com",children:"http://handlebarsjs.com"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"A GUI element normally consists of three parts:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"HTML"}),"\n",(0,r.jsx)(n.li,{children:"CSS"}),"\n",(0,r.jsx)(n.li,{children:"JavaScript"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The HTML of a GUI element is described in a factory using a technology called handlebars. A compiled handlebar definition is stored in the template member of a factory object and is a function that, when called, returns a string that can be converted into HTML:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div {{attr "*"}} />\n'})}),"\n",(0,r.jsx)(n.p,{children:"It is possible to add extra functionality to the handlebar library. This is done by registering new 'helpers':"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Handlebars.registerHelper('*name*', function(*items*, *options*) {...});\n"})}),"\n",(0,r.jsx)(n.p,{children:"USoft by default delivers the helpers listed in the table below. For escaping handlebars, see the last item in the list."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#attr-helper",children:"attr helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#data-helper",children:"data helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#lang-helper",children:"lang helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#now-helper",children:"now helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#preview-helper",children:"preview helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#rule-helper",children:"rule helper"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#escaping-handlebars",children:"Escaping handlebars"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"attr-helper",children:"attr helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"attr"})," helper can be used to add attributes to an HTML element. It is capable of converting properties that are set in Web Designer to HTML attributes."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Syntax"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{ attr "*"  *name*="*value*" *name*="*value*"...  }}\n'})}),"\n",(0,r.jsxs)(n.p,{children:['Parameters are optional. The first parameter is allowed to be "*". You can pass any number of ',(0,r.jsx)(n.em,{children:"name"}),'="',(0,r.jsx)(n.em,{children:"value"}),'" pairs.']}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div {{attr "*" class="@useJQueryClasses:ui-widget-content"}}/>\n'})}),"\n",(0,r.jsx)(n.p,{children:'The \u201c*\u201d as the first parameter extracts all the WebDesigner properties that can be converted to attributes (e.g. uppercase converts to a class="Uppercase" attribute setting).'}),"\n",(0,r.jsx)(n.p,{children:'The second parameter is a conditional settings. If $.udb.settings.get("useJQueryClasses") translates to a boolean true, the attribute setting class="ui-widget-content" is added.'}),"\n",(0,r.jsx)(n.p,{children:"The following sections contain comments and more examples of how attr adds attributes to the HTML element depending on arguments."}),"\n",(0,r.jsx)(n.h3,{id:"-argument",children:"\u201c*\u201d argument"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:'"*\u201d'})," argument iterates all attributes of a JSON control definition and adds them in the correct attribute to the element. Some attributes are attributes of the element, others are added to the class or style attribute."]}),"\n",(0,r.jsx)(n.p,{children:"The target location can be influenced by another member of the factory called templateOptions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'$.udb.ui.registerControl("MenuControl", null, {\n    \u2026\n    templateOptions: {\n        data: {\n            attributes: {\n                menuOrientation: function(value, options) {\n                    return (value ? {attr: "class", value: value} : undefined);\n                }\n            }\n        }\n    },\n    \u2026\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"attrliteral-argument",children:'attr="literal" argument'}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:'attr="literal\u201d'})," argument adds an attribute with the name 'attr' to the element. The value of the attribute is equal to 'literal'."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{attr class="mark-record"}}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"attrpprop-argument",children:'attr="p.prop" argument'}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:'attr="p.prop"'})," argument adds an attribute with the name 'attr' to the element. The value of the attribute will be the value of the corresponding member in the JSON page definition."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{attr "*" rows="props.size"}}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"attrctf-argument",children:[(0,r.jsx)(n.code,{children:'attr="[c]:t[:f]"'})," argument"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:'attr="[c]:t[:f]"'})})," argument adds an attribute with the name 'attr' to the element. The value of the attribute depends on the outcome of condition c. When the outcome evaluates to true or when no c-part is present the t-part is used, otherwise the f-part."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{attr "*" class=":tree-node props.childNodes:closed:empty"}}\n'})}),"\n",(0,r.jsx)(n.p,{children:"When the c-part start with a '@' the value of an application setting is evaluated."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{attr "*" class="@useJQueryClasses:ui-widget-content"}}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"attrv1-v2-argument",children:'attr="v1 v2" argument'}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:'attr="v1 v2"'})," argument adds an attribute with the name 'attr' to the element. The value of the attribute depends on the evaluation of the separate values. The values are each evaluated as ",(0,r.jsx)(n.code,{children:"[c]:t[:f]"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{attr class=":record :props.alias"}}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"data-helper",children:"data helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"data"})," helper can be used to incorporate datasource data in strings."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Applies to"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"data"})," helper only applies to ",(0,r.jsx)(n.strong,{children:"Label"})," and ",(0,r.jsx)(n.strong,{children:"Column"})," controls that are part of a ",(0,r.jsx)(n.strong,{children:"ReplicatedColumnsControl"})," or ",(0,r.jsx)(n.strong,{children:"GridControl"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Syntax"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{{ data *datasource*-*columnname* }}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'There are {{data "CNT"}} item(s) to fix.\n'})}),"\n",(0,r.jsx)(n.p,{children:"can be converted to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"There are 12 item(s) to fix.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"lang-helper",children:"lang helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"lang"})," helper can be used to add text translations to an HTML element. It does this by adding extra HTML elements that secure the original string."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Syntax"}),"\n\xa0"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{lang *string**element-name* }}\n\n*element-name*  ::=  "html"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"String"})," is required. The optional ",(0,r.jsx)(n.em,{children:"element-name"}),', if specified, must be "html".']}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<div>{{lang props.label "html"}}</div>\ncan be converted to:\n<div>\n  <script class="lang-start" type="text/html">original text<\/script>\n        translated text\n    <script class="lang-end" type="text/html"/>\n</div>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"short-notation",children:"Short notation"}),"\n",(0,r.jsx)(n.p,{children:"In most cases USoft supports a short notation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{{'Example'}} or {{\"Example\"}}\n"})}),"\n",(0,r.jsx)(n.p,{children:"is equivalent for:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{{lang 'Example'}} or {{lang \"Example\"}}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This short notation can be useful within the HTML property of an HTMLControl."}),"\n",(0,r.jsx)(n.h2,{id:"now-helper",children:"now helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"now"})," helper can be used to add a date to a website."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Syntax"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{{ now *date-format* }}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'Copyright by USoft B.V. 1995 \u2013 {{now "YYYY"}}\n'})}),"\n",(0,r.jsx)(n.p,{children:"can be converted to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"Copyright by USoft B.V. 1995 \u2013 2022\n"})}),"\n",(0,r.jsx)(n.h2,{id:"preview-helper",children:"preview helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"preview"})," helper can be used to show design data that is only to be made visible in Web Designer."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Syntax"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{{#preview}} *content* {{/preview}}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<iframe>{{#preview}}FrameControl example contents{{/preview}}</iframe>\n"})}),"\n",(0,r.jsx)(n.p,{children:"can be converted to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<iframe>FrameControl example contents</iframe>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"rule-helper",children:"rule helper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"rule"})," helper can be used to add domain attributes to an HTML element. Domain attributes can be used by domain validators."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Syntax"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{{ rule "*" }}\n'})}),"\n",(0,r.jsx)(n.p,{children:'The "*" parameter is required.'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<input {{rule "*"}}/>\n'})}),"\n",(0,r.jsx)(n.p,{children:"can be converted to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<input udb-mandatory="true" udb-ioformat="DD-MM-YYYY"/>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Explanation"}),"\nThe added attributes are used for field validation. The construct iterates over all attributes of a JSON control definition and adds rule attributes depending on whether a rule has been defined for that attribute in the factory definition:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'$.udb.ui.registerControl("Control", null, {\n    \u2026\n    templateOptions: {\n        data: {\n            rules: {\n                mandatory: function(value, options) {\n                    return (value ? {rule: "udb-mandatory", value: true} : undefined);\n                }\n            }\n        }\n    },\n    \u2026\n};\n'})}),"\n",(0,r.jsx)(n.p,{children:"At this time, rule attributes are supported for mandatory, io-format, domain values and numeric values."}),"\n",(0,r.jsx)(n.h2,{id:"escaping-handlebars",children:"Escaping handlebars"}),"\n",(0,r.jsx)(n.p,{children:"In some cases you need to be able to preserve the handlebar notation in the HTML that is generated.\nSuch a situation arises, for example, in combination with attributes. Consider a ButtonControl with the following setting for its title attribute (an Extra HTML Attributes property):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'title="Submit (Alt+S)"\n'})}),"\n",(0,r.jsx)(n.p,{children:"USoft will generate the following HTML:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button data-lang-title="Submit (Alt+S)" title="Submit (Alt+S)"> </button>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["An available translation for \u2018Submit\u2019 will not be used in this case because the key string is ",(0,r.jsx)(n.code,{children:"Submit (Alt+S)"}),". The mnemonic part of the string is static and does not have to be part of the key string. This can be in the following way (pay attention to the combination of ",(0,r.jsx)(n.code,{children:"{"})," and ",(0,r.jsx)(n.code,{children:"["}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'title="{["Submit"]} (Alt+S)"\n'})}),"\n",(0,r.jsx)(n.p,{children:"USoft will generate the following HTML:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button data-lang-title="{{"Submit"}} (Alt+S)" title="Submit (Alt+S)"> </button>\n'})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>i});var a=t(96540);const r={},s=a.createContext(r);function l(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);