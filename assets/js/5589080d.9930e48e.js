"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[20560],{1243:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/54e4feb8-7d75-403e-9389-987e7521c82f-388deea8c3ab7ff58154db783cb15c02.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const a={},i=s.createContext(a);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:t},e.children)}},63559:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ed323a98-b1c3-4bdd-a08f-432944a4fb77-5338d24c2a0b315657941b13ded27dbb.png"},66218:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/The_USoft_Rules_Engine","title":"The USoft Rules Engine","description":"To understand more advanced properties of USoft constraints, the best starting point is the Rules Engine.","source":"@site/docs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/The_USoft_Rules_Engine.md","sourceDirName":"Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine","slug":"/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/The_USoft_Rules_Engine","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/The_USoft_Rules_Engine","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"The_USoft_Rules_Engine"},"sidebar":"sidebar","previous":{"title":"Constraints advanced and the Rules Engine","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine"},"next":{"title":"Where are the rules?","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Where_are_the_rules"}}');var a=n(74848),i=n(28453);const r={id:"The_USoft_Rules_Engine"},o="The USoft Rules Engine",l={},d=[{value:"Separate authorisation rules",id:"separate-authorisation-rules",level:2},{value:"The Rules Engine as API: SELECT",id:"the-rules-engine-as-api-select",level:2},{value:"Rule enforcement: INSERT, UPDATE, DELETE",id:"rule-enforcement-insert-update-delete",level:2}];function h(e){const t={h1:"h1",h2:"h2",header:"header",img:"img",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"the-usoft-rules-engine",children:"The USoft Rules Engine"})}),"\n",(0,a.jsx)(t.p,{children:"To understand more advanced properties of USoft constraints, the best starting point is the Rules Engine."}),"\n",(0,a.jsxs)(t.p,{children:["In USoft solutions, the Rules Engine is the software layer that connects clients to business data in an RDBMS. It takes both data query and data manipulation requests in the form of SQL, as if it were itself the RDBMS. It passes these requests on to the RDBMS on behalf of the USoft client, but in the process, the requests are transformed, and checks and other behaviour are added. The purpose of this extra behaviour is to enforce all the ",(0,a.jsx)(t.strong,{children:"data integrity rules"})," expressed in USoft Definer."]}),"\n",(0,a.jsx)(t.h2,{id:"separate-authorisation-rules",children:"Separate authorisation rules"}),"\n",(0,a.jsxs)(t.p,{children:["In addition, at a layer closer to the data, the Rules Engine enforces data access rules (also: authorisation rules). These roles are expressed separately in USoft Definer at the level of ",(0,a.jsx)(t.strong,{children:"roles"}),". When a user logs on, this role information is combined with information in the USoft Authorizer tables - the tables with names prefixed T_AUTH... . Most importantly, these T_AUTH... tables store information about which individual users are associated with which roles."]}),"\n",(0,a.jsx)(t.p,{children:'Strictly, the Rules Engine enforces both data integrity rules and authorisation rules, in two distinct layers. In everyday practice, it is customary to talk of "the Rules Engine" in the narrow sense to refer only to the part that enforces the data integrity rules. The help topics in this section focus on understanding this part - they ignore the authorisation layer.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(1243).A+"",width:"639",height:"275"})}),"\n",(0,a.jsx)(t.h2,{id:"the-rules-engine-as-api-select",children:"The Rules Engine as API: SELECT"}),"\n",(0,a.jsxs)(t.p,{children:["USoft clients can put in ",(0,a.jsx)(t.strong,{children:"query"})," requests in many ways - by formulating an explicit SELECT statement, or by doing something else such as filling out a form in a GUI. The Rules Engine considers every query to be a SQL SELECT operation. It will return the data result if the client is authorised to see the data."]}),"\n",(0,a.jsx)(t.p,{children:'With queries, no rules (except authorisation rules) are enforced. All the data integrity rules were already enforced when the data was put in the database in the first place. For queries, the Rules Engine layer acts as a kind of API. It determines what data is available and how that data is called. This is especially apparent in Logical Views. The RDBMS knows only physical tables and columns. Because a Rules Engine with its added Logical Views is interposed, the Logical View table and column names are "in the API" that the client can use to get to the data.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(98280).A+"",width:"616",height:"226"})}),"\n",(0,a.jsx)(t.h2,{id:"rule-enforcement-insert-update-delete",children:"Rule enforcement: INSERT, UPDATE, DELETE"}),"\n",(0,a.jsxs)(t.p,{children:["The Rules Engine really comes into its own when clients perform data ",(0,a.jsx)(t.strong,{children:"manipulation"}),". They can do that in many ways - by formulating explicit INSERT, UPDATE and DELETE statements, or by doing something else, such as adding a row to a spreadsheet or changing or removing that row. The Rules Engine considers every such action to be the equivalent of either SQL INSERT, or UPDATE, or DELETE. It will carry out the manipulation if all the data integrity rules allow it. It may perform further manipulation if data integrity rules dictate this. In other words, for each individual record being manipulated, the effect of the Rules Engine (if any) is either ",(0,a.jsx)(t.strong,{children:"blocking"})," or ",(0,a.jsx)(t.strong,{children:"transformatory"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["If ",(0,a.jsx)(t.strong,{children:"blocking"}),", the data manipulation does not take place. For example, if a rule says that a customer must have at least one order, then any attempt to delete his last order is blocked. Here, the standard approach is that the Rules Engine returns the text of the blocking business rule as an error message, although error messages may be customised for many reasons:"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(63559).A+"",width:"614",height:"287"})}),"\n",(0,a.jsxs)(t.p,{children:["If ",(0,a.jsx)(t.strong,{children:"transformatory"}),', the data manipulation is carried out, but "behind the screens" further manipulation also takes place so that the end result has the level of data integrity defined by all the rules. For example, if a rule says that all the orders of a customer must be dropped if the customer himself is dropped, then any DELETE of the customer will result in DELETEs of orders "behind the screens". Here, the standard approach is that the Rules Engine does not return explicit messages. Clients can find out what happened by doing a SELECT as the next action:']}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(68036).A+"",width:"619",height:"236"})}),"\n",(0,a.jsx)(t.p,{children:"\xa0"}),"\n",(0,a.jsx)(t.p,{children:"\xa0"})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},68036:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/713d6e21-9ef1-45f2-a826-b88d71940f46-31a85b56ff8d2a70e856ade9c7329f1f.png"},98280:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/d5b99390-cb65-45aa-85f8-307b42bf3489-c22a8dd39f9c1756099bc20bb1c7f0ec.png"}}]);