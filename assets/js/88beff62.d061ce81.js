"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[68148],{28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>o});var t=n(96540);const a={},r=t.createContext(a);function i(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:s},e.children)}},63028:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Modeller_and_Rules_Engine/Constraints/Constraint_messages","title":"Constraint messages","description":"In a domain constraint and in a table constraint, you can specify a Message in natural language, eg., in English. Such a message is destined for your end user and is presented in an interactive dialog if the constraint is effective.","source":"@site/docs/Modeller_and_Rules_Engine/Constraints/Constraint_messages.md","sourceDirName":"Modeller_and_Rules_Engine/Constraints","slug":"/Modeller_and_Rules_Engine/Constraints/Constraint_messages","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/Constraint_messages","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Constraint_messages"},"sidebar":"sidebar","previous":{"title":"Domain constraints","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/Domain_constraints"},"next":{"title":"Transitional constraints","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/Transitional_constraints"}}');var a=n(74848),r=n(28453);const i={id:"Constraint_messages"},o="Constraint messages",l={},c=[{value:"Errors and warnings",id:"errors-and-warnings",level:2},{value:"Translated messages",id:"translated-messages",level:2},{value:"Variable constraint messages",id:"variable-constraint-messages",level:2},{value:"Variable constraint message: Example 1",id:"variable-constraint-message-example-1",level:2},{value:"Variable constraint message: Example 2",id:"variable-constraint-message-example-2",level:2},{value:"Variable constraint message: Example 3",id:"variable-constraint-message-example-3",level:2},{value:"Variable constraint message: Example 4",id:"variable-constraint-message-example-4",level:2},{value:"Variable constraint message: Example 5",id:"variable-constraint-message-example-5",level:2},{value:"Variable constraint message: Example 6",id:"variable-constraint-message-example-6",level:2}];function d(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"constraint-messages",children:"Constraint messages"})}),"\n",(0,a.jsxs)(s.p,{children:["In a domain constraint and in a table constraint, you can specify a ",(0,a.jsx)(s.strong,{children:"Message"})," in natural language, eg., in English. Such a message is destined for your end user and is presented in an interactive dialog if the constraint is effective."]}),"\n",(0,a.jsx)(s.h2,{id:"errors-and-warnings",children:"Errors and warnings"}),"\n",(0,a.jsxs)(s.p,{children:["In ",(0,a.jsx)(s.em,{children:"restrictive"})," constraints it is customary to specify a message. The runtime message is presented as a message of type Error, because it occurs at a time when processing is blocked."]}),"\n",(0,a.jsxs)(s.p,{children:["In ",(0,a.jsx)(s.em,{children:"productive"})," constraints it is not customary to specify a message. If you do specify a message, at runtime it is presented as a message of type Warning."]}),"\n",(0,a.jsx)(s.p,{children:"You can change a restrictive constraint into a warning constraint or even into a constraint that gives an informative message only."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Example"})}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Define a new message category, and do not select the System check box:"}),"\n"]}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{}),(0,a.jsx)(s.th,{})]})}),(0,a.jsx)(s.tbody,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Category:"}),(0,a.jsx)(s.td,{children:"Constraint Warning"})]})})]}),"\n",(0,a.jsx)(s.p,{children:"\xa0"}),"\n",(0,a.jsxs)(s.ol,{start:"2",children:["\n",(0,a.jsx)(s.li,{children:"Define a new system message:"}),"\n"]}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{}),(0,a.jsx)(s.th,{})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Code:"}),(0,a.jsx)(s.td,{children:"1"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Category:"}),(0,a.jsx)(s.td,{children:"Travel Agency Message"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Name:"}),(0,a.jsx)(s.td,{children:"UNSTABLE_DESTINATION"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Message:"}),(0,a.jsx)(s.td,{children:"This destination is currently considered an unstable region."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Parameter:"}),(0,a.jsx)(s.td,{children:"Destination"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Seqno:"}),(0,a.jsx)(s.td,{children:"1"})]})]})]}),"\n",(0,a.jsx)(s.p,{children:"\xa0"}),"\n",(0,a.jsxs)(s.ol,{start:"3",children:["\n",(0,a.jsx)(s.li,{children:"Define a constraint:"}),"\n"]}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{}),(0,a.jsx)(s.th,{})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Constraint Name:"}),(0,a.jsx)(s.td,{children:"WARNING_UNSTABLE_DESTINATION"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Sql Statement:"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("pre",{children:(0,a.jsxs)("code",{class:"language-sql",children:["INVOKE    RulesEngine.MessageLanguage",(0,a.jsx)("br",{}),"WITH",(0,a.jsx)("br",{}),"SELECT    'Travel Agency Message'",(0,a.jsx)("br",{}),",         'UNSTABLE_DESTINATION'",(0,a.jsx)("br",{}),",         'WARNING'",(0,a.jsx)("br",{}),"FROM      tour t",(0,a.jsx)("br",{}),"WHERE     t.destination IN ",(0,a.jsx)("br",{}),"( ",(0,a.jsx)("br",{}),"     SELECT     u.destination",(0,a.jsx)("br",{}),"     FROM       unstable_destination u",(0,a.jsx)("br",{}),")"]})}),(0,a.jsx)("p",{children:"\xa0"})]})]})]})]}),"\n",(0,a.jsx)(s.p,{children:"To product an informative message instead of a warning message, specify 'INFORMATION' instead of 'WARNING' ."}),"\n",(0,a.jsx)(s.p,{children:"Do not specify a constraint message: the component takes care of the message."}),"\n",(0,a.jsx)(s.h2,{id:"translated-messages",children:"Translated messages"}),"\n",(0,a.jsx)(s.p,{children:"USoft Definer has a Language module. This allows you to localise your application. An important part of this localisation is that you can optionally specify message translations, so that the runtime user can automatically get the message in her own language."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-messages",children:"Variable constraint messages"}),"\n",(0,a.jsx)(s.p,{children:"You can have variable elements in your constraint messages. This allows you to produce error messages and warning messages that are more informative to your end user."}),"\n",(0,a.jsx)(s.p,{children:"Variable elements in constraint messages are marked by angle brackets (<>)."}),"\n",(0,a.jsx)(s.p,{children:"The following table lists all supported constraint variables that you can use in constraint messages."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:(0,a.jsx)(s.strong,{children:"Constraint type"})}),(0,a.jsx)(s.th,{children:(0,a.jsx)(s.strong,{children:"Constraint variables"})})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"SELECT"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("p",{children:"If an expression in the SELECT clause of a constraint has an alias, then the following variable can be used:"}),(0,a.jsxs)("p",{children:["- alias.value",(0,a.jsx)("br",{})]}),(0,a.jsx)("p",{children:"If this expression is a column then the following variables can also be used:"}),(0,a.jsxs)("p",{children:["- alias.prompt",(0,a.jsx)("br",{}),"- alias.columnName",(0,a.jsx)("br",{}),"- alias.tableName",(0,a.jsx)("br",{}),"- alias.objectName",(0,a.jsx)("br",{}),"- alias.objectNamePlural",(0,a.jsx)("br",{})]}),(0,a.jsx)("p",{children:"If the expression is a column without an alias, then the following variables can be used:"}),(0,a.jsxs)("p",{children:["- table.column.value",(0,a.jsx)("br",{}),"- table.column.prompt",(0,a.jsx)("br",{}),"- table.column.columnName",(0,a.jsx)("br",{}),"- table.column.tableName",(0,a.jsx)("br",{}),"- table.column.objectName",(0,a.jsx)("br",{}),"- table.column.objectNamePlural",(0,a.jsx)("br",{})]}),(0,a.jsx)("p",{children:'where "table" is the table name or alias, and "column"**is the column name.'}),(0,a.jsx)("p",{children:"Expressions in the SELECT clause without an alias that are not a column, can not be referred to in the message."}),(0,a.jsx)("p",{children:"It is not possible to refer to columns mentioned in the SELECT statement of a subquery of a constraint."})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"INSERT"}),(0,a.jsx)(s.td,{children:"For all columns of the record inserted, the same variables can be used as for columns in a select list.If the constraint statement is an INSERT INTO... SELECT statement, you can also use the variables from this SELECT statement, like in a SELECT constraint."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"DELETE"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("p",{children:"For all columns of the table from which records are deleted, the same variables can be used as for SELECT or INSERT constraints, except for the value parameter:"}),(0,a.jsxs)("p",{children:["- table.column.before",(0,a.jsx)("br",{})]})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"UPDATE"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("p",{children:"For all columns of the updated table, the same variables can be used as for SELECT or INSERT constraints. In addition to this:"}),(0,a.jsxs)("p",{children:["- table.column.before",(0,a.jsx)("br",{})]}),(0,a.jsx)("p",{children:"If the constraint statement has the form:"}),(0,a.jsx)("pre",{children:(0,a.jsxs)("code",{class:"language-sql",children:["UPDATE ...",(0,a.jsx)("br",{}),"SET ...    =  ",(0,a.jsx)("br",{}),"(",(0,a.jsx)("br",{}),"    SELECT ... ",(0,a.jsx)("br",{}),")"]})}),(0,a.jsx)("p",{children:"you can also use the variables from this SELECT statement, like in a SELECT constraint."})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"DOMAIN"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("p",{children:"For domain constraints the following variables can be used:"}),(0,a.jsxs)("p",{children:["- value",(0,a.jsx)("br",{}),"- before (only for productive domain constraints)",(0,a.jsx)("br",{})]}),(0,a.jsx)("p",{children:"For domain constraints, the following meta information is variable information that is substituted with the information of the column to which the domain constraint applies:"}),(0,a.jsxs)("p",{children:["- Prompt",(0,a.jsx)("br",{}),"- ColumnName",(0,a.jsx)("br",{}),"- TableName",(0,a.jsx)("br",{}),"- ObjectName",(0,a.jsx)("br",{}),"- ObjectNamePlural",(0,a.jsx)("br",{})]})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"INVOKE"}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)("p",{children:"For constraints with an INVOKE statement, the values of Return- and Out-parameters of methods can be used:"}),(0,a.jsxs)("p",{children:["- ",(0,a.jsx)(s.em,{children:"component_name.method.parameter.value"}),(0,a.jsx)("br",{})]})]})]})]})]}),"\n",(0,a.jsx)(s.p,{children:"A productive constraint can manipulate more than one record at a time. Since only one constraint message is displayed each time a constraint is evaluated, referring to a particular record in a constraint message is not possible."}),"\n",(0,a.jsx)(s.p,{children:"If variable constraint messages are used for a productive constraint, only the values for the last manipulated record are displayed in the message."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-1",children:"Variable constraint message: Example 1"}),"\n",(0,a.jsx)(s.p,{children:'In the Travel Agency, the business rule: "Guides must have a bank account" is implemented by a restrictive, single-record constraint:'}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"SELECT \xa0 \xa0first_name, last_name\nFROM \xa0 \xa0 \xa0person\nWHERE \xa0 \xa0 guide = 'Y'\nAND \xa0 \xa0 \xa0 bank_account IS NULL\n"})}),"\n",(0,a.jsx)(s.p,{children:"Because the first_name and last_name columns are specified in the SELECT clause, you now can specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"<person.first_name.value> <person.last_name.value> is a guide and must have a bank account.\n"})}),"\n",(0,a.jsx)(s.p,{children:"The error message displayed will be:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'"John Smith is a guide and must have a bank account".\n'})}),"\n",(0,a.jsx)(s.p,{children:"You can also refer to column values via an alias name if it is available."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-2",children:"Variable constraint message: Example 2"}),"\n",(0,a.jsx)(s.p,{children:'In the Travel Agency, the business rule: "A guide cannot guide more than one tour at the same time" is implemented by a restrictive, multi-record constraint:'}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"SELECT \xa0 \xa0g.first_name \xa0 \xa0 First\n, \xa0 \xa0 \xa0 \xa0 g.family_name \xa0 \xa0Last\n, \xa0 \xa0 \xa0 \xa0 s1.destination\n, \xa0 \xa0 \xa0 \xa0 s1.start_date\n, \xa0 \xa0 \xa0 \xa0 s1.return_date\n, \xa0 \xa0 \xa0 \xa0 s2.destination\n, \xa0 \xa0 \xa0 \xa0 s2.start_date\n, \xa0 \xa0 \xa0 \xa0 s2.return_date\nFROM \xa0 \xa0 \xa0schedtour s1\n, \xa0 \xa0 \xa0 \xa0 schedtour s2\n, \xa0 \xa0 \xa0 \xa0 guide g\nWHERE \xa0 \xa0 s1.guide = s2.guide\nAND \xa0 \xa0 \xa0 s1.guide = g.person_id\nAND \xa0 \xa0 \xa0 s1.schedtour_id != s2.schedtour_id\nAND \xa0 \xa0 \xa0 s1.start_date BETWEEN s2.start_date AND s2.return_date\n"})}),"\n",(0,a.jsx)(s.p,{children:"Because of the columns specified in the SELECT clause, you can specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"<First.value> <Last.value> currently guides the scheduled tours to:\n<s1.destination.value>, from <s1.start_date.value> until <s1.return_date.value>, and to\n<s2.destination.value>, from <s2.start_date.value> until <s2.return_date.value>.\nThese scheduled tours coincide. Please decide what to do.\n"})}),"\n",(0,a.jsx)(s.p,{children:"The error message displayed might be:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'"John Smith currently guides the scheduled tours to:\nAUSTRALIA, from May 7th 2000 until June 1st 2000, and to\nINDONESIA, from May 28th 2000 until Jun 21st 2000.\nThese scheduled tours coincide. Please decide what to do".\n'})}),"\n",(0,a.jsx)(s.p,{children:"You can also use variable constraint messages in productive constraints. For UPDATE constraints you can refer to columns mentioned in the SET clause and in the SELECT clause (if any)."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-3",children:"Variable constraint message: Example 3"}),"\n",(0,a.jsx)(s.p,{children:'In the Travel Agency, the business rule: "The return date of a scheduled tour must match the preset duration of the tour" is implemented by a productive constraint:'}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"UPDATE \xa0 \xa0schedtour st\nSET \xa0 \xa0 \xa0 st.return_date =\n(\n \xa0 \xa0SELECT \xa0 \xa0st.start_date + t.num_days - 1\n \xa0 \xa0FROM \xa0 \xa0 \xa0tour t\n \xa0 \xa0WHERE \xa0 \xa0 t.destination = st.destination\n \xa0 \xa0AND \xa0 \xa0 \xa0 t.tour_type = st.tour_type\n)\n"})}),"\n",(0,a.jsx)(s.p,{children:"For this constraint, you may specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"The scheduled tour to <st.destination.value> on <st.start_date.value> ends on <st.return_date.value>.\n"})}),"\n",(0,a.jsx)(s.p,{children:"This will lead to an information message at run-time."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-4",children:"Variable constraint message: Example 4"}),"\n",(0,a.jsx)(s.p,{children:"For transitional constraints, you may want to refer to the old values:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"SELECT \xa0 \xa0p.first_name\n, \xa0 \xa0 \xa0 \xa0 p.last_name\n, \xa0 \xa0 \xa0 \xa0 OLD( p.discount ) \xa0 \xa0old_discount\nFROM \xa0 \xa0 \xa0person p\nWHERE \xa0 \xa0 discount > OLD( discount ) + 5\n"})}),"\n",(0,a.jsx)(s.p,{children:"For this constraint, you can specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"The personal discount for <p.first_name.value> <p.last_name.value> currently is <old_discount.value> %.\nThis percentage must not increase by more than 5% at a time.\n"})}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-5",children:"Variable constraint message: Example 5"}),"\n",(0,a.jsx)(s.p,{children:"It is also possible to refer to object names and column prompts in constraint messages.:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"SELECT \xa0 \xa0 o.id\n, \xa0 \xa0 \xa0 \xa0 \xa0c.name\n, \xa0 \xa0 \xa0 \xa0 \xa0ABS( c.credit ) \xa0 debt\nFROM \xa0 \xa0 \xa0 order o\n, \xa0 \xa0 \xa0 \xa0 \xa0customer c\nWHERE \xa0 \xa0 \xa0o.cust_id = c.id\nAND \xa0 \xa0 \xa0 \xa0c.credit < 0\n"})}),"\n",(0,a.jsx)(s.p,{children:"For this constraint, you can specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"<o.id.objectName> <o.id.value> is rejected. <c.name.prompt> <c.name.value> has an outstanding debt of <debt.value> US dollars.\n"})}),"\n",(0,a.jsx)(s.p,{children:"The message displayed might for instance be:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'"Order 12455 is rejected. Customer Jones has an outstanding debt of 12,364.12 US dollars".\n'})}),"\n",(0,a.jsx)(s.p,{children:"Although meta information about objectName and Prompt is constant, the maintainability of the messages increases when using this mechanism. Hence, changing a prompt name of a column will automatically have effect on the constraint messages in which this prompt is used. Only meta information defined in the Definer can be used."}),"\n",(0,a.jsx)(s.p,{children:"For Domain Constraints object names and column prompts are useful, since this is variable information and there can be more than one column based on the same domain."}),"\n",(0,a.jsx)(s.h2,{id:"variable-constraint-message-example-6",children:"Variable constraint message: Example 6"}),"\n",(0,a.jsx)(s.p,{children:'Suppose there is a PERCENTAGE domain, and a business rule that states: "All percentages must be rounded to the nearest multiple of 0.5". This business rule has been implemented by a domain constraint, of which the condition reads:'}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"MOD( DOMAIN * 2, 1 ) != 0\n"})}),"\n",(0,a.jsx)(s.p,{children:"And the correction reads:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"ROUND( DOMAIN * 2 ) / 2\n"})}),"\n",(0,a.jsx)(s.p,{children:"For this domain constraint, you may specify the message:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"The <prompt> of this <objectName> has been rounded to the nearest multiple of 0.5\n"})}),"\n",(0,a.jsx)(s.p,{children:"This will lead to an information message at run-time, for example:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'"The Discount of this Person has been rounded to the nearest multiple of 0.5", or "The Group discount percentage of this Reservation has been rounded to the nearest multiple of 0.5".\n'})}),"\n",(0,a.jsx)(s.p,{children:"\xa0"})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);