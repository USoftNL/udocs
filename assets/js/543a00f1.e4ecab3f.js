"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[79839],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(96540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},67986:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Repositories/Data_flow_control_with_XML_or_JSON/XQuery","title":"XQuery","description":"USoft provides support for native Oracle XQuery function using the RDBMS keyword.","source":"@site/docs/Repositories/Data_flow_control_with_XML_or_JSON/XQuery.md","sourceDirName":"Repositories/Data_flow_control_with_XML_or_JSON","slug":"/Repositories/Data_flow_control_with_XML_or_JSON/XQuery","permalink":"/udocs/Repositories/Data_flow_control_with_XML_or_JSON/XQuery","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"XQuery"},"sidebar":"sidebar","previous":{"title":"Example: XML query with Order-by attributes","permalink":"/udocs/Repositories/Data_flow_control_with_XML_or_JSON/Example_XML_query_with_Orderby_attributes"},"next":{"title":"Object shopping","permalink":"/udocs/Repositories/Object_shopping"}}');var o=t(74848),s=t(28453);const i={id:"XQuery"},a="XQuery",c={},l=[];function u(e){const n={code:"code",em:"em",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"xquery",children:"XQuery"})}),"\n",(0,o.jsx)(n.p,{children:"USoft provides support for native Oracle XQuery function using the RDBMS keyword."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Example 1"})}),"\n",(0,o.jsx)(n.p,{children:"This example retrieves (in an XML format) all scheduled tours due to start after the current date."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:"SELECT to_clob(\nrdbms.xmltype.getclobval(\nrdbms.XMLQuery(\nLITERAL ' ''<Tours>\n{for $c in ora:view(\"SCHEDTOUR\")/ROW\nWHERE $c/START_DATE > current-date()\nRETURN <Tour>(<Name>{$c/DESTINATION/text()}</Name>,<StartDate>{$c/START_DATE/text()}</StartDate>,<EndDate>{$c/RETURN_DATE/text()}</EndDate>,<Price>{$c/PRICE/text()}</Price>)</Tour>}\n</Tours>'' \xa0PASSING SYSDATE AS \"s\" RETURNING CONTENT'\n)\n)\n)\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"The result is:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<Tours>\n \xa0<Tour>\n \xa0 \xa0<Name>EUROPE</Name>\n \xa0 \xa0<StartDate>2008-05-01</StartDate>\n \xa0 \xa0<EndDate>2008-05-21</EndDate>\n \xa0 \xa0<Price>1250</Price>\n \xa0</Tour>\n \xa0<Tour>\n \xa0 \xa0<Name>AUSTRALIA</Name>\n \xa0 \xa0<StartDate>2007-10-30</StartDate>\n \xa0 \xa0<EndDate>2007-11-10</EndDate>\n \xa0 \xa0<Price>2500</Price>\n \xa0</Tour>\n</Tours>\n\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"Example 2"})}),"\n",(0,o.jsx)(n.p,{children:"This example returns a parent-child XML structure containing all destinations to which a person has travelled."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:'SELECT to_clob(\nrdbms.xmltype.getclobval(\nrdbms.XMLQuery(\nLITERAL \' \'\'<Tours>\n{for $pe in ora:view("PERSON")\nORDER BY $pe/ROW/FIRST_NAME\nRETURN <Person first_name="{$pe/ROW/FIRST_NAME}" family_name="{$pe/ROW/FAMILY_NAME}">\n{\nfor $pa in ora:view("PARTICIPANT"), $r in ora:view("RESERVATION"), $s in ora:view("SCHEDTOUR")\nWHERE $pe/ROW/PERSON_ID = $pa/ROW/PERSON_ID and $pa/ROW/RES_ID = $r/ROW/RES_ID AND $r/ROW/SCHEDTOUR_ID = $s/ROW/SCHEDTOUR_ID\nRETURN <Destination>{$s/ROW/DESTINATION/text()}</Destination>\n}\n</Person>}\n</Tours>\'\' \xa0PASSING SYSDATE AS "s" RETURNING CONTENT\'\n)\n)\n)\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"The result is"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<Tours>\n \xa0<Person first_name="Albert" family_name="SMITH">\n \xa0 \xa0<Destination>EUROPE</Destination>\n \xa0 \xa0<Destination>AUSTRALIA</Destination>\n \xa0 \xa0<Destination>HOLLAND</Destination>\n \xa0</Person>\n \xa0<Person first_name="Brigitte" family_name="FISHER-SMITH">\n \xa0 \xa0<Destination>HOLLAND</Destination>\n \xa0 \xa0<Destination>AUSTRALIA</Destination>\n \xa0</Person>\n</Tours>\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"\xa0"})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);