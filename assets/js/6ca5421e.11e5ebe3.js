"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[40172],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(96540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}},90773:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Web_and_app_UIs/UDB_udb/udbdialog","title":"$.udb.dialog()","description":"----","source":"@site/docs/Web_and_app_UIs/UDB_udb/udbdialog.md","sourceDirName":"Web_and_app_UIs/UDB_udb","slug":"/Web_and_app_UIs/UDB_udb/udbdialog","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbdialog","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"USoft11","permalink":"/udocs/tags/u-soft-11"},{"inline":true,"label":"USoft10","permalink":"/udocs/tags/u-soft-10"}],"version":"current","frontMatter":{"id":"udbdialog","tags":["USoft11","USoft10"]},"sidebar":"sidebar","previous":{"title":"$.udb.currentPageStackDepth()","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbcurrentPageStackDepth"},"next":{"title":"$.udb.executeInContext()","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbexecuteInContext"}}');var i=s(74848),a=s(28453);const o={id:"udbdialog",tags:["USoft11","USoft10"]},r="$.udb.dialog()",l={},d=[{value:"<strong>$.udb.dialog()</strong>",id:"udbdialog-1",level:2},{value:"Old use: call without promise",id:"old-use-call-without-promise",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"udbdialog",children:"$.udb.dialog()"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"USoft 11``{.vs_11}"})}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["This article describes the USoft 10 product only.\nIn USoft 11, the web UI API was revised and improved. For full details, go to:\n",(0,i.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/Revised_web_UI_API_in_USoft_11",children:"Revised web UI API in USoft 11"})]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"USoft 10``{.vs_10}"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["This article is about the ",(0,i.jsx)(n.strong,{children:"dialog()"})," function of the ",(0,i.jsx)(n.a,{href:"/Web_and_app_UIs/UDB_udb",children:"udb object"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"udbdialog-1",children:(0,i.jsx)(n.strong,{children:"$.udb.dialog()"})}),"\n",(0,i.jsx)(n.p,{children:"Displays a dialog in a dialog window. The dialog shows a message or starts a conversation with the user. The dialog is styled in the framework chosen in the publication configuration."}),"\n",(0,i.jsx)(n.p,{children:"Calling .dialog() while a dialog is already being displayed will result in both messages being displayed in the same dialog."}),"\n",(0,i.jsxs)(n.p,{children:["Returns a Promise object if ",(0,i.jsx)(n.em,{children:"promise"})," is true (the default). Otherwise, returns 'undefined\u2019."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["$.udb.dialog() is similar to ",(0,i.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/udbinput",children:"$.udb.input()"})," but simpler:\nFor more styling and control of dialog content, especially if using previously defined HTML code, prefer ",(0,i.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UI_Library/usdialog",children:".usdialog()"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Syntax"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"$.udb.dialog( { *dialog-control-name* | *caller-block* } )\n\n*caller-block*  ::= \n  {\n       promise:  *promise,*\n       message:  *dialog-message*,\n       title:  *dialog-title*,\n       func:  *close-dialog-fn*,\n       fields:  *fields-array*,\n       icon:  *dialog-icon-cls*,\n       buttons:  *buttons*,\n       useOpacity:  *use-opacity*,\n       closeButton:  *close-button*\n  }\n\n*promise*        ::=  { true | false }\n\n*buttons* ::= *button*[, *button* ...] *button* ::= { *string* | *button-object* } *use-opacity* ::= { true | false } *close-button* ::= { true | false }\n\n.*promise-chain-keyword*(function(*result*){ ... }\n\n*promise-chain-keyword*  ::= { then | catch | finally }\n\n*result*  ::= {\n  answer: *answer*,\n  caller: *caller-block*\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.em,{children:"promise"})," is true (the default, and recommended), a Promise object is returned. Otherwise, \u2018undefined\u2019 is returned."]}),"\n",(0,i.jsxs)(n.p,{children:["You must pass either a ",(0,i.jsx)(n.em,{children:"dialog-control-name"})," which is a string, or a ",(0,i.jsx)(n.em,{children:"caller-block"})," which is a JSON object containing the properties listed (with all the items except 'message' being optional). The remainder of this explanation discusses ",(0,i.jsx)(n.em,{children:"caller-block"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Dialog-message"})," is the message that the dialog must display. This can be either a string, or an object with a message parameter string and an optional params array. Both options are processed by the translation engine to create the required end user message. Passing an empty message (or omitting it) will result in no dialog being displayed."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Dialog-title"})," is the title of the dialog. The default value is 'Warning'. The title is displayed in a title bar across the top of the dialog. If set to '\xa0' (the empty string), this title bar will not be displayed. In the same way as with dialog-message, the title can be either a string, or an object with a message parameter string with an optional params array, and both are processed by the translation engine to create the required title string."]}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.em,{children:"promise"})," is false, 'func\u2019 is a function called when a dialog button is pressed that causes the dialog to close. The function receives the string value (or the Id value of the button object, if used). See also ",(0,i.jsx)(n.em,{children:"close-botton"})," below and Example 3."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["This function is ",(0,i.jsx)(n.strong,{children:"deprecated."})," Instead, set promise**= true and use the .then() clause of the Promise object returned by $.udb.dialog, which can perform the exact same action. This strategy is shown in Example 1."]})}),"\n",(0,i.jsxs)(n.p,{children:["If you call $.udb.dialog() with a 'fields' fields-array, this will result in the call being transferred to ",(0,i.jsx)(n.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/udbinput",children:"$.udb.input() "}),"instead, so that the input fields can be properly displayed."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Dialog-icon-cls"})," is a string which designates a CSS icon class used in the dialog. It specifies what kind of dialog is to be displayed. This option is only supported if the JQuery-UI framework is specified (by the Framework publication property). The default is \u2018ui-icon-alert\u2019."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Buttons"})," is an array of button definitions for one or more buttons displayed at the bottom of the dialog. For each button you can pass either a string value or a button object:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If a string is passed, its value will be used for the button's \"Id\" attribute and for the button's text label (which is also processed by the translation engine)."}),"\n",(0,i.jsx)(n.li,{children:'If a button object is passed, its parameters will be used to create a customised button. The syntax of these button objects is the same as for the .usdialog() framework API function. The default is a single "OK" button without any special customisation.'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Use-opacity"})," is a boolean that determines if the dialog is displayed as a modal dialog, in which case an Opacity Control is displayed behind the dialog so that anything on the underlying page becomes inaccessible. The dialog is modal if use-opacity is true (the default), and non-modal otherwise."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Close-button"})," is a boolean that determines if a close icon ( 'X' ) is displayed in the top-right corner of the dialog. If the user presses this icon, the dialog closes without the close-dialog-function being processed."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Promise-chain-keyword"})," applies only if ",(0,i.jsx)(n.em,{children:"promise"})," is true. You can pass a function with a ",(0,i.jsx)(n.em,{children:"result"})," parameter to a ",(0,i.jsx)(n.strong,{children:".then()"}),", ",(0,i.jsx)(n.strong,{children:".catch()"})," or ",(0,i.jsx)(n.strong,{children:".finally()"})," clause in a promise chain. You can then get from the *result.*",(0,i.jsx)(n.strong,{children:"answer"})," property the id of the button that the user pressed, as the Examples show. You can get from ",(0,i.jsx)(n.em,{children:"result"}),".",(0,i.jsx)(n.strong,{children:"caller"})," the ",(0,i.jsx)(n.em,{children:"caller-block"})," that $.udb.dialog() was called with."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Example 1"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'$.udb.dialog({\n    message: "Are you sure you want to delete this record?",\n    title: "Confirm delete",\n    buttons: ["YES", "NO"]\n}).then(function(result) {\n    if (result.answer === "YES") {\n      return $.udb("PERSON").rows("current").rowDelete();\n    }\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Example 2"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'$.udb.dialog({\n    message: {\n        message: "PENDING",\n        params: [changedRows.length]\n    },\n    title: "Information",\n    buttons: ["SAVE", "DISCARD", {id: "CANCEL", default: true}],\n    closeButton: false,\n    icon: "ui-icon-info"\n}).then(function(result) {\n    if (result.answer === "" || result.answer === "CANCEL") {\n        return;\n    } else\n    if (result.answer === "SAVE") {\n        return $.udb.commit({quiet: this.params.quiet});\n    } else\n        //...\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"old-use-call-without-promise",children:"Old use: call without promise"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Example 3"})}),"\n",(0,i.jsx)(n.p,{children:"This is the same as Example 1, but without the promise mechanism. This is now old use."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'$.udb.dialog({\n    promise: false,\n    message: "Are you sure you want to delete this record?",\n    title: "Confirm delete",\n    buttons: ["YES", "NO"],\n    func: function(result){\n      if (result === "YES") {\n        $.udb("PERSON").rows("current").rowDelete();\n      }\n    }\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:"\xa0"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);