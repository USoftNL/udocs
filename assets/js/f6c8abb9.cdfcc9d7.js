"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[11660],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(96540);const i={},s=a.createContext(i);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:t},e.children)}},80870:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"Task_flow/Jobs/Defining_a_job","title":"Defining a job","description":"A job in USoft is essentially a procedure: a series of operations that form a functional whole and that are performed in a predefined sequence each time the job is called.","source":"@site/docs/Task_flow/Jobs/Defining_a_job.md","sourceDirName":"Task_flow/Jobs","slug":"/Task_flow/Jobs/Defining_a_job","permalink":"/udocs/Task_flow/Jobs/Defining_a_job","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Defining_a_job"},"sidebar":"sidebar","previous":{"title":"Jobs","permalink":"/udocs/Task_flow/Jobs"},"next":{"title":"Executing a Job from USoft Binder","permalink":"/udocs/Task_flow/Jobs/Executing_a_Job_from_USoft_Binder"}}');var i=n(74848),s=n(28453);const o={id:"Defining_a_job"},r="Defining a job",l={},h=[{value:"Viewing jobs",id:"viewing-jobs",level:3},{value:"Planning a job",id:"planning-a-job",level:3},{value:"Defining input parameters (if you need them)",id:"defining-input-parameters-if-you-need-them",level:3},{value:"Defining job action",id:"defining-job-action",level:3},{value:"",id:"",level:3},{value:"Setting up a callable job",id:"setting-up-a-callable-job",level:3},{value:"Validating the job",id:"validating-the-job",level:3},{value:"Delivering the job",id:"delivering-the-job",level:3}];function c(e){const t={code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"defining-a-job",children:"Defining a job"})}),"\n",(0,i.jsxs)(t.p,{children:["A ",(0,i.jsx)(t.strong,{children:"job"})," in USoft is essentially a procedure: a series of operations that form a functional whole and that are performed in a predefined sequence each time the job is called."]}),"\n",(0,i.jsxs)(t.p,{children:["Callers of a job can be made to pass ",(0,i.jsx)(t.em,{children:"input parameters"}),", much in the same way that other programming environments perform remote procedure calls (RPCs)."]}),"\n",(0,i.jsxs)(t.p,{children:["A job can pass output parameters back to the caller, but more typically, the output of a job is simply that it manipulates application data on the server. A job manipulates data automatically against the Rules Engine, not directly against the database. In this sense, you can say that jobs ",(0,i.jsx)(t.em,{children:"implement business rules"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Jobs raise errors and produce error messages as is customary in comparable RPC environments. Asynchronous job execution is customarily logged to file in the conventional way."}),"\n",(0,i.jsxs)(t.p,{children:["Once you have defined a job, you must have it ",(0,i.jsx)(t.em,{children:"validated."})," USoft validates a job essentially by checking that the SQL statements in the job are syntactically correct and refer to existing tables and columns."]}),"\n",(0,i.jsx)(t.h3,{id:"viewing-jobs",children:"Viewing jobs"}),"\n",(0,i.jsx)(t.p,{children:"You can view jobs that already exist in your repository. Click on the Batch tab of the catalog on the left-hand side of the USoft Definer window."}),"\n",(0,i.jsx)(t.h3,{id:"planning-a-job",children:"Planning a job"}),"\n",(0,i.jsx)(t.p,{children:"First, plan the job you want to create:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Determine what is the (sequence of) operation(s) that you want the job to perform."}),"\n",(0,i.jsx)(t.li,{children:"Think of a good name for the job."}),"\n",(0,i.jsx)(t.li,{children:"Think about the information that the job needs to do its work: the input parameters you need to pass when you run the job."}),"\n",(0,i.jsx)(t.li,{children:"Finally, think about HOW the job should do what it needs to do."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"defining-input-parameters-if-you-need-them",children:"Defining input parameters (if you need them)"}),"\n",(0,i.jsx)(t.p,{children:"These step-by-step instructions are just a simple scenario of declaring input parameters of a job. There are many more possibilities, for example, computing parameters on the basis of a SQL statement. For details go to the section on External Sets."}),"\n",(0,i.jsx)(t.p,{children:"Follow these steps as a simple scenario for declaring input parameters of a job:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Choose Define, Sets, External Sets. The External Sets window appears."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the Set Name field, type a meaningful name for the parameter set."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"To define the first parameter, click in the first row in the Elements tab and enter 1 in the Sequence Number field."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the Element Name field, enter a meaningful name for the parameter (this is the name that will be used in all SQL statements)."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Click the Data Type lookup button, and choose a data type from the list that appears."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the Data Length field, enter the appropriate length."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Repeat Steps 3-6 for each additional parameter, then save work."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"defining-job-action",children:"Defining job action"}),"\n",(0,i.jsx)(t.p,{children:"Let's assume that the things you want the job to do can be expressed in SQL statements (using either INSERT, UPDATE, DELETE, or INVOKE). Follow these steps:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Double-click the SQL Tasks node in the Batch catalog, or choose Define, Tasks, SQL Tasks from the USoft Definer menu."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The SQL Tasks window or tab opens."}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsx)(t.li,{children:"Type a name for the SQL Task. Then in the SQL Statements tab, for each SQL statement, make up a Sequence number (indicating in what ORDER the Job will execute the SQLs), write a short Description, then type the SQL statement in the editor pane on the right."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"If operations performed by the job are all in the same area, and may be aborted and rolled back as a unit, the easiest way is to put all the SQL in a single SQL Task. If you want to control commit behavior by bundle of SQL statements, create multiple SQL Tasks."}),"\n",(0,i.jsxs)(t.ol,{start:"3",children:["\n",(0,i.jsx)(t.li,{children:"If your SQL needs to refer to information from input parameters, define an Input Parameter Set to list parameters and their datatype, then use that parameter list in your SQL as if it were a database table with a single record. To give just one example of how this could look, here is a SQL statement that marks expired Tours in a Travel Agency as Ready For Archiving. It only affects Tours to a destination passed as in input parameter:"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"UPDATE \xa0 \xa0tour t\nSET \xa0 \xa0 \xa0 ready_for_archive = 'Y'\nWHERE \xa0 \xa0 destination =\n(\n \xa0 \xa0 \xa0 \xa0 \xa0SELECT \xa0 \xa0p.destination\n \xa0 \xa0 \xa0 \xa0 \xa0FROM \xa0 \xa0 \xa0p_tour p\n)\nAND \xa0 \xa0 \xa0 t.status = 'Expired'\n\n"})}),"\n",(0,i.jsx)(t.p,{children:"In this example, 'p_tour' is the name of an External Set used as Input Parameter Set."}),"\n",(0,i.jsxs)(t.ol,{start:"4",children:["\n",(0,i.jsx)(t.li,{children:"Save work. Click the Check button to have your work validated. Correct SQL statements will get the Correct = Yes flag."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"",children:"\xa0"}),"\n",(0,i.jsx)(t.h3,{id:"setting-up-a-callable-job",children:"Setting up a callable job"}),"\n",(0,i.jsx)(t.p,{children:"In these steps you are exposing your SQL to callers in the outside world by placing the SQL in a named job and (if necessary) defining input parameters."}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Double-click the Jobs node in the Batch catalog, or choose Define, Jobs from the USoft Definer menu."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The Jobs window or tab opens."}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Type the Job Name and (if used) the Input Parameter Set name."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the Tasks tab, for each Task, type a Task Name, make up a Sequence number (indicating the ORDER in which the Job will execute its Tasks), then type the name of the SQL Task in the SQL column (or use one of the other columns for task types, as appropriate)."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The names you have to declare in Steps 2 and 3 are the minimally required names. As long as you have no reason to split or organise the material otherwise, you could have the same name for the Job, the Task, and the SQL Task."}),"\n",(0,i.jsxs)(t.ol,{start:"4",children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"The Tasks tab in the Jobs window is also the place where you can determine how the various parts of the job are committed, rolled back and aborted. If necessary, make settings in columns Commit Type and Abort Mode for the individual tasks."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Save work. Click the Validate button to have the entire job validated. Correct Jobs will get the Correct = Yes flag."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Your job is now ready to be executed, that is, called by runtime agents."}),"\n",(0,i.jsx)(t.p,{children:"You can validate jobs for syntactical correctness before running them, if required."}),"\n",(0,i.jsx)(t.h3,{id:"validating-the-job",children:"Validating the job"}),"\n",(0,i.jsx)(t.p,{children:"To validate a job:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Click the Validate button in the Jobs window, or select the job in the Jobs window, and choose Special, Validate from the menu bar."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"All the tasks used in the job are checked, and those tasks that are correct will have their Correct flags set to correct. If all tasks, and the job itself are completely correct, the Correct flag for the job will also be set to correct."}),"\n",(0,i.jsx)(t.p,{children:"If the SQL statement for a task is not correct, the Correct flag for that task is NOT set to incorrect. The job itself will be set to incorrect. The reason for this is that the task may be incorrect in the context of this particular job, but if it is used in other jobs, the task may be correct in the context of those jobs."}),"\n",(0,i.jsx)(t.h3,{id:"delivering-the-job",children:"Delivering the job"}),"\n",(0,i.jsx)(t.p,{children:"When jobs are executed, their definition is read either directly from the repository (the database) or from the .CON file."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the case of web applications, users simply connect to a web server. The Rules Service that executes the jobs on behalf of the users reads the job either from a .CON file or directly from repository."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"In the case of C/S application, a .CON file must be generated and distributed to the appropriate end user machines."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Typically, as an application developer you create and test jobs using the repository, but your end users execute jobs read from a .CON file."}),"\n",(0,i.jsx)(t.p,{children:"Make sure your users have appropriate foreground rights on the tables and columns that the job manipulates. For information about foreground rights, go to the USoft Authorizer help."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);