"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[19173],{2969:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Row_checks","title":"Row checks","description":"Row checks are checks applied to the record being processed. To do a row check, values from multiple fields within the record may be needed, but no values from other records are needed.","source":"@site/docs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Row_checks.md","sourceDirName":"Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine","slug":"/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Row_checks","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Row_checks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Row_checks"},"sidebar":"sidebar","previous":{"title":"Transaction checklist signals","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Transaction_checklist_signals"},"next":{"title":"Update-on-self corrections","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints_advanced_and_the_Rules_Engine/Updateonself_corrections"}}');var r=t(74848),o=t(28453);const c={id:"Row_checks"},a="Row checks",i={},d=[{value:"Effect of row checks",id:"effect-of-row-checks",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"row-checks",children:"Row checks"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Row checks"})," are checks applied to the record being processed. To do a row check, values from multiple fields within the record may be needed, but no values from ",(0,r.jsx)(n.em,{children:"other"})," records are needed."]}),"\n",(0,r.jsx)(n.p,{children:"Row checks are performed at store-record time, after any update-on-self corrections are applied to the record values, but before the row is actually stored. This is also expressed by saying that row checks occur in the pre-store phase of a store-record event."}),"\n",(0,r.jsx)(n.p,{children:"The following types of table constraint are evaluated as row checks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Restrictive, non-transitional, single-record constraints that are not deferred (= that have the default Deferred = Do Not Defer setting). (Example 1.)"}),"\n",(0,r.jsx)(n.li,{children:"Restrictive transitional constraints that have the table in which the record is stored as their Transition Table. (Example 2.)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Row checks contrast with transaction checks."}),"\n",(0,r.jsx)(n.p,{children:"Row checks are listed in BenchMark profiler output with Reason = ROW_CONSTRAINT."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example 1"})}),"\n",(0,r.jsx)(n.p,{children:"Members of staff cannot be coaches of themselves. A table constraint with the following Constraint SQL checks this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT \xa0 \xa0' ' violation\nFROM \xa0 \xa0 \xa0staff\nWHERE \xa0 \xa0 person_id = coached_by\n"})}),"\n",(0,r.jsx)(n.p,{children:"If this constraint is not deferred, this is evaluated as a row check each time a store-record event occurs for table STAFF."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Example 2"})}),"\n",(0,r.jsx)(n.p,{children:'The business rule: "The number of days between start date and return date of a scheduled tour must equal the number of days set for the tour" is implemented by the following restrictive transitional constraint:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT \xa0 \xa0'' violation\nFROM \xa0 \xa0 \xa0tour t\n, \xa0 \xa0 \xa0 \xa0 schedtour st\nWHERE \xa0 \xa0 t.destination = st.destination\nAND \xa0 \xa0 \xa0 t.tour_type=st.tour_type\nAND \xa0 \xa0 \xa0 st.return_date - st.start_date + 1 != t.num_days\n"})}),"\n",(0,r.jsx)(n.p,{children:"with transition settings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Transition Table: \xa0 \xa0SCHEDTOUR\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Fire On Insert: \xa0 \xa0 \xa0Always\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Fire On Delete: \xa0 \xa0 \xa0Never\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Fire On Update: \xa0 \xa0 \xa0Used Columns\n"})}),"\n",(0,r.jsx)(n.p,{children:"This is evaluated as a row check each time a store-record event occurs for table SCHEDTOUR. For store-record events on the TOUR table, it will not be evaluated."}),"\n",(0,r.jsx)(n.h2,{id:"effect-of-row-checks",children:"Effect of row checks"}),"\n",(0,r.jsx)(n.p,{children:"An evaluated row check is found to have an effect if the column values in the record being checked meet the conditions expressed in the table constraint SQL: if, with these column values, the SELECT statement has a query result of 1 or more rows. In this case, processing is blocked and the constraint message defined for the table constraint is returned. The attempted manipulation of the column value(s) does not take place. If the store-record event was raised by the user interactively attempting to leave a record, then this navigation is blocked and she remains in the record."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var s=t(96540);const r={},o=s.createContext(r);function c(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);