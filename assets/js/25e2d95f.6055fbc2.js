"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[24177],{16520:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Task_flow/Tasks/Import_tasks_Recognising_external_file_layout","title":"Import tasks: Recognising external file layout","description":"By default, USoft Batch allows you to specify how import records should be read. The external set used for the import task describes how external records are interpreted. This determines how USoft Batch recognizes fields within an import record.","source":"@site/docs/Task_flow/Tasks/Import_tasks_Recognising_external_file_layout.md","sourceDirName":"Task_flow/Tasks","slug":"/Task_flow/Tasks/Import_tasks_Recognising_external_file_layout","permalink":"/udocs/Task_flow/Tasks/Import_tasks_Recognising_external_file_layout","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Import_tasks_Recognising_external_file_layout"},"sidebar":"sidebar","previous":{"title":"Import tasks: rejecting tables","permalink":"/udocs/Task_flow/Tasks/Import_tasks_rejecting_tables"},"next":{"title":"Import tasks: Working with parameters","permalink":"/udocs/Task_flow/Tasks/Import_tasks_Working_with_parameters"}}');var s=n(74848),a=n(28453);const o={id:"Import_tasks_Recognising_external_file_layout"},i="Import tasks: Recognising external file layout",l={},c=[];function d(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"import-tasks-recognising-external-file-layout",children:"Import tasks: Recognising external file layout"})}),"\n",(0,s.jsx)(t.p,{children:"By default, USoft Batch allows you to specify how import records should be read. The external set used for the import task describes how external records are interpreted. This determines how USoft Batch recognizes fields within an import record."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Because USoft Batch uses Import SQL statements, you can filter out any lines in the external file that are not real records (in particular, header and footer information). Do this by using a WHERE clause that only picks records with the right data structure."}),"\n",(0,s.jsx)(t.li,{children:"You can define an external set that can accept various record structures by making sure that all set elements have a string data type."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Import tasks that recognize record structure automatically filter out any unwanted lines in external files, even if these are different because they are produced by different (versions of) external programs."}),"\n",(0,s.jsx)(t.p,{children:"How to write an import task that recognizes external file layout:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Define an external set that can accept all types of expected records. In practice, you will need an external set that only has string elements."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"If there are non-string (numerical, date) columns in the application table that you import into, use your database vendor's conversion function(s) in the import SQL statement. For instance, on Oracle use TO_DATE() to convert a string to a date value."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"In the import SQL statement, include a WHERE clause filtering out any file contents that do not have the required import record structure."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Example:"})}),"\n",(0,s.jsx)(t.p,{children:"Suppose that an external file contains the following lines. The import records can be recognized because they start with the letter C:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"Athis is a starter record\nBthis is another type of header record\nC31121996this is a true import record, containing a date value\nC14051997this is another import record\n+C...\nC...\nDthis is a closing record\n\n"})}),"\n",(0,s.jsx)(t.p,{children:"You can import this correctly by defining an external set that looks like:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"1 \xa0 \xa0 \xa0 \xa0record_type \xa0 \xa0string(1)\n2 \xa0 \xa0 \xa0 \xa0day_date \xa0 \xa0string(8)\n3 \xa0 \xa0 \xa0 \xa0...\n\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:"The date in the C-records is read as a string, not as a date."})}),"\n",(0,s.jsx)(t.p,{children:"The import SQL statement should look something like the following, where the example of the TO_DATE Oracle-specific function is used:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"INSERT INTO \xa0 <app_table>\nSELECT \xa0 \xa0 \xa0 [...,] TO_DATE(day_date_string), [...]\nFROM \xa0 \xa0 \xa0 \xa0 <import task set>\nWHERE \xa0 \xa0 \xa0 \xa0recordtype = 'C'\n\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var r=n(96540);const s={},a=r.createContext(s);function o(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);