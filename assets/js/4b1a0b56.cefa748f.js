"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[80064],{28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>o});var r=i(96540);const n={},s=r.createContext(n);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:t},e.children)}},63419:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Continuous_delivery/USoft_Delivery_Manager_by_concept/Registries_in_UDeliver","title":"Registries in UDeliver","description":"This article is about the registry concept in USoft Delivery Manager (\u201cUDeliver\u201d).","source":"@site/docs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Registries_in_UDeliver.md","sourceDirName":"Continuous_delivery/USoft_Delivery_Manager_by_concept","slug":"/Continuous_delivery/USoft_Delivery_Manager_by_concept/Registries_in_UDeliver","permalink":"/udocs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Registries_in_UDeliver","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Registries_in_UDeliver"},"sidebar":"sidebar","previous":{"title":"Publication objects in UDeliver","permalink":"/udocs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Publication_objects_in_UDeliver"},"next":{"title":"Sections in UDeliver","permalink":"/udocs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Sections_in_UDeliver"}}');var n=i(74848),s=i(28453);const a={id:"Registries_in_UDeliver"},o="Registries in UDeliver",l={},c=[{value:"Strategies for using registry data in deployment",id:"strategies-for-using-registry-data-in-deployment",level:3},{value:"Delivery Manager support for registries",id:"delivery-manager-support-for-registries",level:3},{value:"How to write a registry manually",id:"how-to-write-a-registry-manually",level:3},{value:"How to import a registry",id:"how-to-import-a-registry",level:3},{value:"How to release the registry",id:"how-to-release-the-registry",level:3},{value:"How to mix in computer-specific settings",id:"how-to-mix-in-computer-specific-settings",level:3},{value:"How to customise the registry format",id:"how-to-customise-the-registry-format",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"registries-in-udeliver",children:"Registries in UDeliver"})}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["This article is about the ",(0,n.jsx)(t.strong,{children:"registry"})," concept in USoft Delivery Manager (\u201cUDeliver\u201d)."]})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"See also"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/udocs/Continuous_delivery/Delivery_Manager_basic_procedures/Loading_registry_samples",children:"Loading registry samples"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/udocs/Continuous_delivery/Delivery_Manager_basic_procedures/Creating_a_registry",children:"Creating a registry"})}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["A ",(0,n.jsx)(t.em,{children:"registry"})," is an XML document that acts as a mini-database describing how target machines are different from Development machines: it provides data needed for ",(0,n.jsx)(t.em,{children:"configuration."})]}),"\n",(0,n.jsx)(t.p,{children:"You typically use a single registry in your DTAP arrangement, but Delivery Manager allows you to keep several and switch between them."}),"\n",(0,n.jsx)(t.p,{children:"The structure and contents of this registry are free-format. You can tailor every aspect of the registry to your needs."}),"\n",(0,n.jsx)(t.p,{children:"Configure example 1 illustrates the use of a registry for configuring machine-specific information, combined with a deploy script that reads this information at the time when deliverables are deployed."}),"\n",(0,n.jsx)(t.h3,{id:"strategies-for-using-registry-data-in-deployment",children:"Strategies for using registry data in deployment"}),"\n",(0,n.jsx)(t.p,{children:"USoft Delivery Manager provides help and examples for 2 typical strategies of using registry data."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Strategy 1 - Computer-specific sections"})}),"\n",(0,n.jsx)(t.p,{children:"You can describe computer-specific information by mentioning computernames. For example, you can distribute flatfiles to different locations on different machines by providing sections of registry data such as:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'<Registry>\n \xa0<Computers>\n \xa0 \xa0<Computer name="PROD_BS01">\n \xa0 \xa0 \xa0<Locations>\n \xa0 \xa0 \xa0 \xa0<Flatfiles>C:\\USoft\\91\\app</Flatfiles>\n \xa0 \xa0 \xa0 \xa0<Logs>C:\\Users\\Default\\AppData\\Local\\Temp\\Logs</Logs>\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0<Computer name="PROD_BS02">\n \xa0 \xa0 \xa0<Locations>\n \xa0 \xa0 \xa0 \xa0<Flatfiles>C:\\USD91\\APP</Flatfiles>\n \xa0 \xa0 \xa0 \xa0<Logs>C:\\Users\\Default\\AppData\\Local\\Temp\\Logs</Logs>\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0...\n\n'})}),"\n",(0,n.jsx)(t.p,{children:"Deploy scripts can tap into this registry data and distribute a set of flatfiles to the correct location on each machine by heeding only the registry section that corresponds to the computername of the computer where the deploy script executes."}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["While registries describe target machines and source variables do not, teams have reported that variable substitution in registries is generally useful. For this reason, from USoft 10.0.1C, you can use ",(0,n.jsx)(t.a,{href:"/udocs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Source_variables_in_UDeliver",children:"source variables"})," in registry XML. They are automatically substituted by values when you release the registry. The substitutions can be previewed on the Settings tab in the Registries window."]})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.em,{children:"Strategy 2 - Computer settings"})}),"\n",(0,n.jsx)(t.p,{children:"You can express computer-specific information as name-value pairs, where the name is a placeholder in this format:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"${MyPlaceholder}\n"})}),"\n",(0,n.jsx)(t.p,{children:"For example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'<Registry>\n \xa0<Computers>\n \xa0 \xa0<Computer name="PROD_BS01">\n \xa0 \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0 \xa0<Setting name="${ADMIN_USER}" value="ADMIN_1">\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0<Computer name="PROD_BS02">\n \xa0 \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0 \xa0<Setting name="${ADMIN_USER}" value="ADMINISTRATOR">\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0...\n\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can then position these same placeholders in specific places in your deliverables: in upgrade scripts, deliverable data, Service Framework config files, and Web Designer published files. For each occurrence of a placeholder, deploy scripts can read the corresponding computer-specific value from the registry and replace the placeholder by the value just before deploying the deliverable on the target computer."}),"\n",(0,n.jsx)(t.h3,{id:"delivery-manager-support-for-registries",children:"Delivery Manager support for registries"}),"\n",(0,n.jsx)(t.p,{children:"Registry XML data may be produced by any USoft or non-USoft software. If possible, it is attractive to organise the information in a single data structure that is published for each application version (each release) and that is accessible for each deliverable type."}),"\n",(0,n.jsxs)(t.p,{children:["If you keep a registry in Delivery Manager itself, then each time you execute a release action, Delivery Manager automatically outputs an XML file named ",(0,n.jsx)(t.strong,{children:"registry.xml"})," to the current release folder (if you do not switch this feature off)."]}),"\n",(0,n.jsxs)(t.p,{children:["If you keep name-value pairs for computer-specific settings, Delivery Manager automatically mixes these settings into the ",(0,n.jsx)(t.strong,{children:"registry.xml"})," file it produces."]}),"\n",(0,n.jsx)(t.p,{children:"If necessary, you can customise the registry format to your liking, especially if you associate settings with tags."}),"\n",(0,n.jsx)(t.h3,{id:"how-to-write-a-registry-manually",children:"How to write a registry manually"}),"\n",(0,n.jsx)(t.p,{children:"Follow these steps to write a registry manually:"}),"\n",(0,n.jsx)(t.p,{children:"1.\xa0Choose Release, Registries from the menu."}),"\n",(0,n.jsx)(t.p,{children:"2.\xa0Give the registry a name and write, or copy-paste, the XML code in the Document field."}),"\n",(0,n.jsx)(t.p,{children:"3.\xa0Make sure the registry that you want to output has the Current = Yes flag. Only 1 registry can be current at any one time. If you set this flag for a registry record, any other registry records will automatically get Current = No."}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"You can get a jump start by loading a registry sample provided by USoft. Choose Tools, Load Registry Sample from the menu."})}),"\n",(0,n.jsx)(t.h3,{id:"how-to-import-a-registry",children:"How to import a registry"}),"\n",(0,n.jsx)(t.p,{children:'If you have software that collects, stores or processes information about target computers, you may want to extract this information and transfer it into a Delivery Manager registry XML. There are many options for automating this transfer. If the information is in structured data, for example, in an already existing USoft application that stores information about such things as "instances" or "application variables" describing computer-specific settings, then a good implementation could be to create a Task that calls the "Export application data" action in that repository, and then imports the result into the Registry table.'}),"\n",(0,n.jsx)(t.h3,{id:"how-to-release-the-registry",children:"How to release the registry"}),"\n",(0,n.jsx)(t.p,{children:'The registry stored in Delivery Manager is automatically (re)released each time you call a release action, that is, an action named "Release...". To release the registry:'}),"\n",(0,n.jsx)(t.p,{children:"1.\xa0Make sure the registry you want to release has the Current = Yes flag."}),"\n",(0,n.jsx)(t.p,{children:"2.\xa0Make sure the Current Release has the Put Current Registry = Yes flag."}),"\n",(0,n.jsx)(t.p,{children:'3.\xa0Run a Task Step that executes any action named "Release...".'}),"\n",(0,n.jsxs)(t.p,{children:["The registry is released as a file named ",(0,n.jsx)(t.strong,{children:"registry.xml"})," in the release folder. This is the folder named after the application version you are releasing."]}),"\n",(0,n.jsx)(t.h3,{id:"how-to-mix-in-computer-specific-settings",children:"How to mix in computer-specific settings"}),"\n",(0,n.jsx)(t.p,{children:"You can get Delivery Manager, just prior to releasing the registry, to mix computer-specific settings into the registry XML. The result will look like this:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'<Registry>\n \xa0<Computers>\n \xa0 \xa0<Computer name="PROD_BS01">\n \xa0 \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0 \xa0<Setting name="${ADMIN_USER}" value="ADMIN_1">\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0<Computer name="PROD_BS02">\n \xa0 \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0 \xa0<Setting name="${ADMIN_USER}" value="ADMINISTRATOR">\n \xa0 \xa0 \xa0 \xa0...\n \xa0 \xa0</Computer>\n \xa0 \xa0...\n\n'})}),"\n",(0,n.jsx)(t.p,{children:"To get Delivery Manager to mix in computer-specific settings in this way:"}),"\n",(0,n.jsxs)(t.p,{children:["1.\xa0Make sure that the registry XML actually contains ",(0,n.jsx)(t.strong,{children:"<Computer>"})," nodes representing each computer for which you want to have settings mixed in, as in the example."]}),"\n",(0,n.jsx)(t.p,{children:"2.\xa0Declare the settings in Delivery Manager by declaring computers, target variables, and computer settings."}),"\n",(0,n.jsx)(t.p,{children:'3.\xa0Run a Task Step that executes any action named "Release...".'}),"\n",(0,n.jsxs)(t.p,{children:["The settings automatically appear in the ",(0,n.jsx)(t.strong,{children:"registry.xml"})," file that is output to the release folder:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Each setting maps to a ",(0,n.jsx)(t.strong,{children:"<Setting>"})," element with a parent ",(0,n.jsx)(t.strong,{children:"<Settings>"})," element that is child of a ",(0,n.jsx)(t.strong,{children:"<Computer>"})," element identifying the computer."]}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.strong,{children:"name"})," attribute of the ",(0,n.jsx)(t.strong,{children:"<Computer>"})," element identifies the computer by computername."]}),"\n",(0,n.jsxs)(t.li,{children:["Any existing ",(0,n.jsx)(t.strong,{children:"<Setting>"})," element (and its contents) at this point in the XML is silently overwritten."]}),"\n",(0,n.jsxs)(t.li,{children:["If no corresponding ",(0,n.jsx)(t.strong,{children:"<Computer>"})," element exists in the registry XML, the setting is ignored."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"how-to-customise-the-registry-format",children:"How to customise the registry format"}),"\n",(0,n.jsx)(t.p,{children:"You can customise the way in which the computer settings appear in the registry XML:"}),"\n",(0,n.jsx)(t.p,{children:"1.\xa0Choose Define, Custom XSL, create a new custom XSL transformation, and give it any name, for example 'registry-transform'."}),"\n",(0,n.jsx)(t.p,{children:"2.\xa0In the Document field, write an XSL transformation that transforms the registry to what you want."}),"\n",(0,n.jsx)(t.p,{children:"3.\xa0Choose Define, Registries, retrieve the registry record with Current = Yes, and set the Added XSL field to 'registry-transform'."}),"\n",(0,n.jsxs)(t.p,{children:["4.\xa0If you want a specific subset of settings to move to a specific place in the registry, associate all the settings in that set with the same tag. This causes ",(0,n.jsx)(t.strong,{children:"<Tag>"})," child elements to appear in the generated XML, in this format:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:' \xa0 \xa0...\n \xa0 \xa0<Computer name="PROD_BS01">\n \xa0 \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0 \xa0<Setting name="${ADMIN_USER}" value="ADMIN_1">\n \xa0 \xa0 \xa0 \xa0 \xa0<Tagged_with>\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0<Tag name="admin"/>\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0<Tag name="Users"/>\n \xa0 \xa0 \xa0 \xa0 \xa0 \xa0..\n\n'})}),"\n",(0,n.jsx)(t.p,{children:"5.\xa0Use these additional child elements in 'registry-transform' so that the correct settings are positioned in the correct place in the XML. You may want 'registry-transform' to strip the tag information in the process."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);