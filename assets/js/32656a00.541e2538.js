"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[23e3],{28453:(e,i,a)=>{a.d(i,{R:()=>s,x:()=>o});var n=a(96540);const t={},r=n.createContext(t);function s(e){const i=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),n.createElement(r.Provider,{value:i},e.children)}},98111:(e,i,a)=>{a.r(i),a.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"Continuous_delivery/Delivery_Manager_background_information/Upgrade","title":"Upgrade","description":"Upgrade is the operation whereby, on a target machine, the previous release version of your USoft application is replaced by the current (on the target machine, the \\"next\\") release version.","source":"@site/docs/Continuous_delivery/Delivery_Manager_background_information/Upgrade.md","sourceDirName":"Continuous_delivery/Delivery_Manager_background_information","slug":"/Continuous_delivery/Delivery_Manager_background_information/Upgrade","permalink":"/udocs/Continuous_delivery/Delivery_Manager_background_information/Upgrade","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Upgrade"},"sidebar":"sidebar","previous":{"title":"Best-practice task design","permalink":"/udocs/Continuous_delivery/Delivery_Manager_background_information/Bestpractice_task_design"},"next":{"title":"Stashing","permalink":"/udocs/Continuous_delivery/Delivery_Manager_background_information/Stashing"}}');var t=a(74848),r=a(28453);const s={id:"Upgrade"},o="Upgrade",l={},d=[{value:"Upgrading flat files",id:"upgrading-flat-files",level:3},{value:"Upgrading metadata",id:"upgrading-metadata",level:3},{value:"Upgrading authorisation data",id:"upgrading-authorisation-data",level:3},{value:"Upgrading application data",id:"upgrading-application-data",level:3},{value:"Upgrading publications",id:"upgrading-publications",level:3},{value:"Upgrading servers",id:"upgrading-servers",level:3},{value:"Upgrading a USoft installation",id:"upgrading-a-usoft-installation",level:3}];function c(e){const i={a:"a",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"upgrade",children:"Upgrade"})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.em,{children:"Upgrade"}),' is the operation whereby, on a target machine, the previous release version of your USoft application is replaced by the current (on the target machine, the "next") release version.']}),"\n",(0,t.jsx)(i.p,{children:"To upgrade, you must deploy deliverables associated with the new version one-by-one (section by section)."}),"\n",(0,t.jsx)(i.p,{children:"Most deliverables are easy to upgrade. With flatfiles, for example, all you need to do is to stop any running Rules Services on the target machine, overwrite the existing flatfiles with the new flatfiles, and then restart the Rules Services."}),"\n",(0,t.jsxs)(i.p,{children:["However, because USoft applications are data-intensive, upgrading ",(0,t.jsx)(i.em,{children:"application data"})," can be a delicate procedure, especially if complex data structure changes (metadata changes) have occurred in the new release, in which case you could be at risk of losing production data when moving from the old to the new data structure. To help prevent this, Delivery Manager allows you to register upgrade scripts in a controlled way so that the steps of the upgrade procedure on a target machine are properly signposted."]}),"\n",(0,t.jsx)(i.p,{children:'Upgrading application data in this way is the subject of the "Upgrade scripts" help topic. The sections below describe, in more general terms, how you can upgrade different types of deliverable.'}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-flat-files",children:"Upgrading flat files"}),"\n",(0,t.jsx)(i.p,{children:"On a target machine, flat files are required by USoft instances that run from Flat File as opposed to running from Repository. Flat files are also required for any module run by the application."}),"\n",(0,t.jsx)(i.p,{children:"To upgrade flat files on a target machine:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make sure that any running USoft Rules Services and any opened client/server USoft applications are stopped."}),"\n",(0,t.jsx)(i.li,{children:'Replace the old flatfiles in the \\APP subfolder of the usoft installation folder by the new flatfiles found in the "flatfiles" section of the release folder.'}),"\n",(0,t.jsx)(i.li,{children:"Restart the USoft Rules Services."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-metadata",children:"Upgrading metadata"}),"\n",(0,t.jsx)(i.p,{children:'On a target machine, metadata ("Definer data") are used by USoft instances that run from Repository.'}),"\n",(0,t.jsx)(i.p,{children:"To upgrade metadata on a target machine:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make sure that any running USoft Rules Services and any opened client/server USoft applications are stopped."}),"\n",(0,t.jsx)(i.li,{children:'Open USoft Definer and Import the metadata changes delivered in the "metadata" section of the release folder. You can do this by calling XML.IMPORT from SQL Command. If your application is called MYAPP, the metadata changes are delivered in a file named "MYPP.USD.diff.xml".'}),"\n",(0,t.jsxs)(i.li,{children:["If your application is a top-level application that consumes modules, you will need to ",(0,t.jsx)(i.a,{href:"/udocs/Continuous_delivery/USoft_Delivery_Manager_by_concept/Modules_in_UDeliver",children:"replace the module flatfiles"})," if you are moving to a later version of the module."]}),"\n",(0,t.jsx)(i.li,{children:'If you run the top-level application from Repository, best practice is NOT to install the flat files of the top-level application. If you choose to do this, take care that local Rules Services do not have the Definitions From = "Automatic" setting, because in that case, a Rules Service will automatically run from Flat Files when it is restarted if flat files are found in the \\APP folder.'}),"\n",(0,t.jsx)(i.li,{children:"Restart the USoft Rules Services."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-authorisation-data",children:"Upgrading authorisation data"}),"\n",(0,t.jsx)(i.p,{children:"Upgrading authorisation data is usually a straightforward procedure that does not require any special upgrade scripts."}),"\n",(0,t.jsx)(i.p,{children:"To upgrade authorisation data on a target machine:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Open USoft Authorizer."}),"\n",(0,t.jsx)(i.li,{children:'Import authorisation data changes delivered in the "appdata" section of the release folder. You can do this by calling XML.IMPORT from SQL Command. Authorisation changes are delivered in a file named "USAUTH.diff.xml".'}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-application-data",children:"Upgrading application data"}),"\n",(0,t.jsx)(i.p,{children:'To have application data upgraded successfully on target machines, a development team must consider at build time if special procedures are necessary. Details of this decision are described in the "Upgrade scripts" help topic.'}),"\n",(0,t.jsx)(i.p,{children:'If no special procedures are necessary, you will find no deliverables in the "scripts" section. In this case, to upgrade application data on a target machine:'}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:'Import application data changes delivered in the "appdata" section of the release folder. If your top-level application is called "MYAPP", application data changes will be delivered in a file named "MYAPP.diff.xml". You can open a client/server GUI for the top-level application and import by calling XML.IMPORT in SQL Command, or you can let a Rules Service execute this XML.IMPORT statement.'}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-publications",children:"Upgrading publications"}),"\n",(0,t.jsx)(i.p,{children:"To upgrade, on a target machine, publications developed in USoft Web Designer :"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make sure that any running USoft Rules Services are stopped."}),"\n",(0,t.jsx)(i.li,{children:"Locate the publication deliverables of the previous version and delete them from the file system."}),"\n",(0,t.jsx)(i.li,{children:'Copy the new deliverables found in the "publications" section of the release folder to the location where you deleted the previous version. It is possible that multiple publications are delivered in this section; in this case, for details on choosing the correct publication, go to the "Publications section" help topic.'}),"\n",(0,t.jsx)(i.li,{children:"Restart the Rules Service(s)."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-servers",children:"Upgrading servers"}),"\n",(0,t.jsx)(i.p,{children:"To upgrade, on a target machine, a server developed in USoft Service Definer (and known as a server object in Delivery Manager):"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make sure that any running USoft Rules Services are stopped."}),"\n",(0,t.jsx)(i.li,{children:"Stop and uninstall the current server."}),"\n",(0,t.jsx)(i.li,{children:"Locate the server deliverables of the previous version and delete them from the file system."}),"\n",(0,t.jsx)(i.li,{children:'Copy the new deliverables found in the "servers" section of the release folder to the location where you deleted the previous version. It is possible that multiple servers are delivered in this section; in this case, for details on choosing the correct publication, go to the "Servers section" help topic.'}),"\n",(0,t.jsx)(i.li,{children:"Install and start the new version of the server."}),"\n",(0,t.jsx)(i.li,{children:"Restart the Rules Service(s)."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"upgrading-a-usoft-installation",children:"Upgrading a USoft installation"}),"\n",(0,t.jsx)(i.p,{children:"Delivery Manager does not assist in upgrading to a different USoft version on a target machine. This is a manual operation."}),"\n",(0,t.jsx)(i.p,{children:"First, find out if the application version you are upgrading to runs against a different USoft version than the previous application version:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:'Check if a USoft executable is delivered as part of the release folder that was delivered to the target machine. This works if your team\'s release strategy is to create, each time a new USoft version is required, a "usoft-install" folder as a sibling folder of the folders for release sections (see the picture in the " Deliverables and sections " topic) and to place the new USoft executable there. This is a recommended strategy because it allows deployers to see immediately that a new USoft version must be installed, and it makes the executable readily available.'}),"\n",(0,t.jsx)(i.li,{children:"Otherwise, check the information in the packing slip (if it is included in the delivery). Delivery Manager allows releasers to register the USoft version that their application version runs against. This information is also released to the packing slip."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"If you must install a new USoft version:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Make sure that any running USoft Rules Services, any opened client/server USoft applications, and any running instances of USoft Binder are stopped."}),"\n",(0,t.jsx)(i.li,{children:"Using the Control Panel, uninstall the current USoft installation."}),"\n",(0,t.jsx)(i.li,{children:"Get the executable of the new USoft version."}),"\n",(0,t.jsx)(i.li,{children:"Check that you have a valid license file available in a local folder."}),"\n",(0,t.jsx)(i.li,{children:"Install the new USoft version by running the executable."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"\xa0"}),"\n",(0,t.jsx)(i.p,{children:"\xa0"})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);