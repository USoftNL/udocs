"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[52148],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const a={},i=s.createContext(a);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},71003:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Web_and_app_UIs/UDB_Events/colpreupdate","title":"colpreupdate","description":"This article is about the colpreupdate UDB event handler.","source":"@site/docs/Web_and_app_UIs/UDB_Events/colpreupdate.md","sourceDirName":"Web_and_app_UIs/UDB_Events","slug":"/Web_and_app_UIs/UDB_Events/colpreupdate","permalink":"/udocs/Web_and_app_UIs/UDB_Events/colpreupdate","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"colpreupdate"},"sidebar":"sidebar","previous":{"title":"colpostupdate","permalink":"/udocs/Web_and_app_UIs/UDB_Events/colpostupdate"},"next":{"title":"dataset","permalink":"/udocs/Web_and_app_UIs/UDB_Events/dataset"}}');var a=t(74848),i=t(28453);const r={id:"colpreupdate"},o="colpreupdate",l={},c=[{value:"<strong>colpreupdate</strong>",id:"colpreupdate-1",level:2},{value:"Purpose",id:"purpose",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"Examples",id:"examples",level:2},{value:"Options",id:"options",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"colpreupdate",children:"colpreupdate"})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["This article is about the ",(0,a.jsx)(n.strong,{children:"colpreupdate"}),(0,a.jsx)(n.a,{href:"/Web_and_app_UIs/UDB_Events",children:" UDB event handler"}),"."]})}),"\n",(0,a.jsx)(n.h2,{id:"colpreupdate-1",children:(0,a.jsx)(n.strong,{children:"colpreupdate"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"colpreupdate"})," event may be called from web pages developed in Web Designer and processed by a USoft page engine service."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Event"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Applies to"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Occurs when"})})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"colpreupdate"})}),(0,a.jsx)(n.td,{children:"Data source objects"}),(0,a.jsx)(n.td,{children:"Before a value in a column is updated\xa0*"})]})})]}),"\n",(0,a.jsx)(n.p,{children:"*\xa0Whether the value is updated manually or by looking up a (new) value from a dropdown list."}),"\n",(0,a.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,a.jsx)(n.p,{children:"You can use the colpreupdate event to manipulate programmatically a value that a user supplied manually for update."}),"\n",(0,a.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,a.jsx)(n.p,{children:"Find or create an Event Listener object with Event Type = colpreupdate. Event Listeners are in the Web Designer Controls catalog:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:t(83461).A+"",width:"104",height:"32"})}),"\n",(0,a.jsx)(n.p,{children:"Insert the event listener into the data source object. Insert a callClientScript action into the event listener. Use this action's Script property to code the behaviour that you want to see when the event occurs. A typical pattern is to specify the condition under which you want to manipulate the user input, and then to specify how you want to alter the input if the condition applies. This pattern looks like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"if ( *user-value-test* ) {\n  options.value = *manipulated-value*;\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"You are implicitly associating the event with an event handler function. This function has an options parameter. For available options, see the Options section at the end of this help topic:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"function(*evt*, *options*){ ... }\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Or you can create the event handler more explicitly by calling ",(0,a.jsx)(n.strong,{children:"$.udb('data-source').on()"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example 1"})}),"\n",(0,a.jsx)(n.p,{children:"This example tacitly sets a new age value to 18 if the value that the user attempts to update this column to is lower than 18:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"if (this.rows('current').cols(\"AGE\").val() < 18)\n  options.value = 18;\n"})}),"\n",(0,a.jsx)(n.p,{children:"If the context of your code is such that the updated column is known to be the AGE column, you can abbreviate to:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"if (options.col.val() < 18)\n    options.value = 18;\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example 2"})}),"\n",(0,a.jsx)(n.p,{children:'This example replaces any empty values by the value "Unknown":'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'if (options.value == "")\n  options.value = "Unknown";\n'})}),"\n",(0,a.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,a.jsx)(n.p,{children:"When the event occurs, the following event handler function is called. You can use this function's options parameter in your event scripting."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"function( 'colpreupdate', *options* ){}\n\n*options*   ::=  *event-options*\n\n*event-options*   ::=  {\n     options:  *caller-options*\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"This syntax means that you can access a caller option by scripting"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"options.*caller-option*\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.em,{children:"Caller-options"})," are as follows:"]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Property"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Type"})}),(0,a.jsx)(n.th,{children:(0,a.jsx)(n.strong,{children:"Description"})})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"value"}),(0,a.jsx)(n.td,{children:"(Any primitive type)"}),(0,a.jsx)(n.td,{children:"The value that the column is updated to"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"col"}),(0,a.jsx)(n.td,{children:"String"}),(0,a.jsx)(n.td,{children:"The name of the column being updated"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"record"}),(0,a.jsx)(n.td,{children:"Number, Array"}),(0,a.jsx)(n.td,{children:"The index(es) of the affected row(s)"})]})]})]}),"\n",(0,a.jsx)(n.p,{children:"\xa0"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},83461:(e,n,t)=>{t.d(n,{A:()=>s});const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAMAAADJyc2SAAABFFBMVEX///9CQkL/35tQUJvf//8lJSXfm1AlJVB3m72bUCUlUJt3UCUlUHeb3/9QUHebd1B3vf93d1AlJXebm1B3m9/f/713JXe9//9QJXe935v//9+bUFDf35tQJVB3vd//vXff/9+bvd///71vb2+6ubolUFDf3/9QJSWbvZunp6eOjo//373U1NRYWFh3JVBZWVna2dvfm3dQm9+Ghoajo6O+vr7g4OIAAAD//wDgxItJJSVqqOJJSYvE4OLg4KlqJUqKxOJJJWuo4OJqSSUlSWtJSWuKakolJUpqqMaKSSUlSYslJWuoaiVJisbEikolaqng4MaKSUrExItJJUrgqGvE4MaKqIuKxItJSUpqisbgxKnE4KlwvY5RAAABuUlEQVRIx+3VWVeCQBQAYAQmtCLLLEtbzDIr25ehKSyyRc00l/b+//9oZgBBDqHMQU4P3QfOdQb5uJdh4Lg/ERESYTi9A8cL4uhKiViaDhlaECiw12JP7RcPAALeED6MASkaA+MiPwEmZX4qDqRpzshnErNASg7pAFvjjO71QXPzKX5hURDTGRn/Wlpe4VaFrJGv5chkajhHh9YtaKMfysby0U2c8wV8rrSFBzFh5mkyOaSjQ9sWtONcDMV4Alek3zmvQ72cTA6uCFjQrgXtOVq3L6cz9OaThKBQ1sxzZFL2tSgOLOnQgEh/8oJ4VADHuVgiVaQLgEJiLyeTvhzuxIJOR7oznEX6Ft5/uAYMKfxACo4wIOUcB7PkDQEvCV2QN/wyGMhLQmrJ9U/u44Mq8pCChTwk/YJX1xpEN2V0C+40dP8AKtUaeCwxQC6SCZFnVC8/NWDzudXGnNrpVuGL2gmqIkfrkPra1ihaecMjiBH63TGhVvtdLeHmGSOMEHAMKC6rrvnRgK3ap0GwVuQMm6S/Rw2IuhqEX3QxUOi7Vi/7hVxCYdwd/G+qjBLD7s0msXwmmDbx0L57PwREbiNG9ndiAAAAAElFTkSuQmCC"}}]);