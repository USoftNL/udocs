"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[86100],{17635:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Desktop_UIs/Scripting_in_USoft_Windows_Designer/Actions_Example_12_Generic_search_dialog","title":"Actions Example 12: Generic search dialog","description":"This example is a variation on Actions Example 11: Window with Separate Search Dialog. In this example, you will make the search dialog more generic or abstract; making it reusable in different situations.","source":"@site/docs/Desktop_UIs/Scripting_in_USoft_Windows_Designer/Actions_Example_12_Generic_search_dialog.md","sourceDirName":"Desktop_UIs/Scripting_in_USoft_Windows_Designer","slug":"/Desktop_UIs/Scripting_in_USoft_Windows_Designer/Actions_Example_12_Generic_search_dialog","permalink":"/udocs/Desktop_UIs/Scripting_in_USoft_Windows_Designer/Actions_Example_12_Generic_search_dialog","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Actions_Example_12_Generic_search_dialog"},"sidebar":"sidebar","previous":{"title":"Actions Example 11: Window with separate search dialog","permalink":"/udocs/Desktop_UIs/Scripting_in_USoft_Windows_Designer/Actions_Example_11_Window_with_separate_search_dialog"},"next":{"title":"Window interaction","permalink":"/udocs/Desktop_UIs/Scripting_in_USoft_Windows_Designer/Window_interaction"}}');var o=t(74848),s=t(28453);const r={id:"Actions_Example_12_Generic_search_dialog"},a="Actions Example 12: Generic search dialog",c={},l=[{value:"Search Dialog",id:"search-dialog",level:2},{value:"Reservations window",id:"reservations-window",level:2},{value:"Reservations child box",id:"reservations-child-box",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"actions-example-12-generic-search-dialog",children:"Actions Example 12: Generic search dialog"})}),"\n",(0,o.jsx)(n.p,{children:"This example is a variation on Actions Example 11: Window with Separate Search Dialog. In this example, you will make the search dialog more generic or abstract; making it reusable in different situations."}),"\n",(0,o.jsx)(n.p,{children:"The search dialog of example 11 only works if the calling window is an instance of the Reservations info box class. This includes embedded Reservations boxes, and subclasses of the Reservations class."}),"\n",(0,o.jsx)(n.p,{children:"The search dialog of example 12 will work with any calling windows that require destination and customer search conditions."}),"\n",(0,o.jsx)(n.p,{children:"But you could go as far as making a generic query toolbar supporting any kind and number of search conditions for any base table."}),"\n",(0,o.jsx)(n.h2,{id:"search-dialog",children:"Search Dialog"}),"\n",(0,o.jsx)(n.p,{children:"To get a dialog that can act as a generic toolbar and function with ANY calling window:"}),"\n",(0,o.jsx)(n.p,{children:"1.\xa0Create a new subclass of the Dialog Box class, rename it to SearchDialog."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"or:"})}),"\n",(0,o.jsx)(n.p,{children:"Rename and adapt your FindExistingReservations Dialog (Example 11) into this newly defined SearchDialog."}),"\n",(0,o.jsx)(n.p,{children:"2.\xa0In the Controls Group, insert a text box with prompt: Destination, and set the Related Column property to:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"TOUR.DESTINATION\n"})}),"\n",(0,o.jsx)(n.p,{children:"A lookup button will appear that calls a lookup window for Tours."}),"\n",(0,o.jsx)(n.p,{children:"3.\xa0Insert a text box with prompt: Customer Name, and set the Related Column property to:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"PERSON.FAMILY_NAME\n"})}),"\n",(0,o.jsx)(n.p,{children:'4.\xa0Rename the OK and Cancel buttons to "Find" and "Close" respectively, and reposition them if required.'}),"\n",(0,o.jsx)(n.p,{children:"5.\xa0In the Object Activator for the Action property of the Find button, remove the dialog-ok() action, and create the following user-defined properties:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Property Name"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Type"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Argument Position"})})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"TheBoxToQuery"}),(0,o.jsx)(n.td,{children:"Info Window"}),(0,o.jsx)(n.td,{children:"1"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"ConditionDestination"}),(0,o.jsx)(n.td,{children:"BaseColumn"}),(0,o.jsx)(n.td,{children:"2"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"ConditionCustomer"}),(0,o.jsx)(n.td,{children:"BaseColumn"}),(0,o.jsx)(n.td,{children:"3"})]})]})]}),"\n",(0,o.jsx)(n.p,{children:"Make sure to select the SearchDialog in the Object Browser tree view (top-left) while defining those properties. Note that the first property is no longer of the Reservations type (like in example 11), but the more abstract Info Window type. The other two properties have the BaseColumn as the type which can refer to the query columns in another table. Note that instead of BaseColumn, you can also use the OUTPUT_COLUMN type with the same result."}),"\n",(0,o.jsx)(n.p,{children:"6.\xa0Still in the Object Activator for the Action property of the Find button, continue writing the following script:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"theBoxToQuery.QueryDefine() )\nconditionDestination.value(Variables.Text_Box_1() )\nconditionCustomer.value(Variables.Text_Box_2() )\ntheBoxToQuery(QueryExecute() )\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"In the second and third line, you need to be specific about the Value property to avoid type mismatch."}),"\n",(0,o.jsx)(n.p,{children:"7.\xa0Click Apply and OK to save your work and close the Object Activator."}),"\n",(0,o.jsx)(n.h2,{id:"reservations-window",children:"Reservations window"}),"\n",(0,o.jsx)(n.p,{children:"To get a Reservations window that the user can query via the SearchDialog:"}),"\n",(0,o.jsx)(n.p,{children:'1.\xa0Create a new subclass of the Reservations info box class, rename it to "ReservationsFindExisting".'}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"or:"})}),"\n",(0,o.jsx)(n.p,{children:'Adapt the "ReservationFindExisting" (Example 11) into this newly defined Reservations sub class.'}),"\n",(0,o.jsx)(n.p,{children:'2.\xa0Insert a new button and change the button prompt to "Find Existing ... ".'}),"\n",(0,o.jsx)(n.p,{children:"3.\xa0Open the Object Activator for the Action property of the button."}),"\n",(0,o.jsx)(n.p,{children:'4.\xa0From the Windows Designer catalog, drag the "SearchDialog" dialog class into the Script box. This results in the following action statement being created:'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"SearchDialog(....,....,....).Window.Create()\n"})}),"\n",(0,o.jsx)(n.p,{children:"5.\xa0For the first parameter subnode, select the ReservationsFindExisting class itself (the top-level or root object in the tree) and click Set. For the second, select the query.destination and click Set. For the third, select the query.family_name and click Set. These result in:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"SearchDialog( Self(), query.destination(), query.family_name() ) Window.Create()\n"})}),"\n",(0,o.jsx)(n.p,{children:"USoft replaces root-level objects by the keyword Self. The advantage of this is that the script remains valid even if the window class is renamed or embedded, or if subclass is made of it."}),"\n",(0,o.jsx)(n.p,{children:"6.\xa0Click Apply and OK to save your work and close the Object Activator."}),"\n",(0,o.jsx)(n.h2,{id:"reservations-child-box",children:"Reservations child box"}),"\n",(0,o.jsx)(n.p,{children:"Suppose you have a Scheduled Tours window where Reservations are embedded as a child box, the SearchDialog can also be used. To do this, in the Action property of the button to create the Search Dialog window, define the following script:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"SearchDialog( Self(), query.destination(), ChildBox.query.family_name() )\nWindow.Create()\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);