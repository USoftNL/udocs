"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[22832],{16098:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/67fe35fa-5036-445b-a7e6-cc9bd230d30a-cc3d2014480e6839d9de3a72ee9d6fad.png"},17761:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Modeller_and_Rules_Engine/Constraints/Domain_constraints","title":"Domain constraints","description":"A domain constraint is a restriction (a form of data integrity) that applies to column values of a given type. It is expressed in one or more SQL fragments.","source":"@site/docs/Modeller_and_Rules_Engine/Constraints/Domain_constraints.md","sourceDirName":"Modeller_and_Rules_Engine/Constraints","slug":"/Modeller_and_Rules_Engine/Constraints/Domain_constraints","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/Domain_constraints","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Domain_constraints"},"sidebar":"sidebar","previous":{"title":"Constraints","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/"},"next":{"title":"Constraint messages","permalink":"/udocs/Modeller_and_Rules_Engine/Constraints/Constraint_messages"}}');var s=t(74848),a=t(28453);const o={id:"Domain_constraints"},r="Domain constraints",l={},c=[{value:"Restrictive domain constraints",id:"restrictive-domain-constraints",level:3},{value:"Productive domain constraints",id:"productive-domain-constraints",level:3},{value:"How to write a restrictive domain constraint",id:"how-to-write-a-restrictive-domain-constraint",level:3},{value:"How to write a productive domain constraint",id:"how-to-write-a-productive-domain-constraint",level:3},{value:"Having the constraint checked",id:"having-the-constraint-checked",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"domain-constraints",children:"Domain constraints"})}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"domain constraint"})," is a restriction (a form of data integrity) that applies to column values of a given type. It is expressed in one or more SQL fragments."]}),"\n",(0,s.jsx)(n.p,{children:"For example, a domain constraint could enforce that no colon (:) or semicolon (;) characters are used in description texts of a specific type, giving an error message if a user attempts to use these characters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:" \xa0 \xa0INSTR(DOMAIN,':')<>0\nOR  INSTR(DOMAIN,';')<>0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Another domain constraint could automatically round all values of a specific type to multiples of 0,5, without giving any error message:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"ROUND(DOMAIN*2)/2\n"})}),"\n",(0,s.jsxs)(n.p,{children:["A domain constraint belongs to a specific ",(0,s.jsx)(n.strong,{children:"domain"}),". The restriction is enforced for all the data values stored in all the columns based on that domain."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Use a ",(0,s.jsx)(n.a,{href:"/Modeller_and_Rules_Engine/Domains",children:"domain attribute"})," if your restriction is in one of these categories. In these cases you don't need to write a domain constraint:"]})}),"\n",(0,s.jsx)(n.h3,{id:"restrictive-domain-constraints",children:"Restrictive domain constraints"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.em,{children:"restrictive"})," domain constraint checks for each value produced by the user or the application if it is allowed. If it is not allowed, processing is blocked and the domain constraint gives an error message."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Examples"})}),"\n",(0,s.jsx)(n.p,{children:'"A description text must not contain colon (:) or semicolon (;) characters.\u201d'}),"\n",(0,s.jsx)(n.p,{children:'"A person\'s first name must be entered with an initial capital letter followed by lowercase-only."'}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"The first example is best considered as restrictive. You want the message to communicate the rule to the user, so that he or she can decide what to replace the forbidden characters by (perhaps another interpunction character such as a comma).\nThe second example is perhaps better considered as productive (next section), because the rule fully dictates what the target value must be. It is more user-friendly to produce it automatically for the user than to complain about it."})}),"\n",(0,s.jsx)(n.h3,{id:"productive-domain-constraints",children:"Productive domain constraints"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.em,{children:"productive"})," domain constraint automatically performs some operation on each value that a user submits for a column based on the domain. This way, the domain constraint guarantees that all the resulting values are allowed values."]}),"\n",(0,s.jsx)(n.p,{children:"A productive domain constraint typically operates in silence: it does not give a message."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Examples"})}),"\n",(0,s.jsx)(n.p,{children:'"Discount percentages must be rounded to a multiple of 0.5\u201d.'}),"\n",(0,s.jsx)(n.p,{children:'"A person\'s first name must be entered with an initial capital letter followed by lowercase-only."'}),"\n",(0,s.jsx)(n.p,{children:"If you implement the second example by a productive domain constraint, the constraint will automatically capitalise the first letter if it was not already a capital letter, and it will automatically change the remaining characters to lowercase if they were capital letters."}),"\n",(0,s.jsx)(n.h3,{id:"how-to-write-a-restrictive-domain-constraint",children:"How to write a restrictive domain constraint"}),"\n",(0,s.jsx)(n.p,{children:"To write a restrictive domain constraint:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the left-hand catalog, on the Model and Rules tab, find the Constraints, ",(0,s.jsx)(n.strong,{children:"Domain Constraints"})," node."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Double-click this node, or right-click and choose New Domain Constraint. Alternatively, you can choose Define, Constraints, Domain from the main menu."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(20183).A+"",width:"212",height:"140"})}),"\n",(0,s.jsx)(n.p,{children:"The Domain Constraints window is opened."}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In the Domain Name field, identify the domain that the constraint is for. At runtime, the constraint will be active when any value in any column based on this domain is entered or changed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In the Constraint Name field, enter any unique name."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.strong,{children:"Do Not Allow That"})," field, write a SQL condition expressing what is not allowed, using the DOMAIN keyword as a placeholder for the runtime input value. For example, to block any use of colons (:) and semi-colons (;), write:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:" \xa0 \xa0INSTR(DOMAIN,':')<>0\nOR  INSTR(DOMAIN,';')<>0\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsx)(n.li,{children:"In the Message field, write an explanatory message to the end user that will be displayed when she attempts to enter a value that is blocked by the constraint."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Now ",(0,s.jsx)(n.strong,{children:"have the constraint checked"}),'. This step is essential. See "Having the constraint checked\u201d later in this article.']}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(16098).A+"",width:"668",height:"422"})}),"\n",(0,s.jsx)(n.h3,{id:"how-to-write-a-productive-domain-constraint",children:"How to write a productive domain constraint"}),"\n",(0,s.jsx)(n.p,{children:"To write a productive domain constraint:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the left-hand catalog, on the Model and Rules tab, find the Constraints, ",(0,s.jsx)(n.strong,{children:"Domain Constraints"})," node."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Double-click this node, or right-click and choose New Domain Constraint. Alternatively, you can choose Define, Constraints, Domain from the main menu."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(20183).A+"",width:"212",height:"140"})}),"\n",(0,s.jsx)(n.p,{children:"The Domain Constraints window is opened."}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In the Domain Name field, identify the domain that the constraint is for. At runtime, the constraint will be active when any value in any column based on this domain is entered or changed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"In the Constraint Name field, enter any unique name."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.strong,{children:"Make Sure That"})," field, write a SQL expression that indicates what the input value must be replaced by, using the DOMAIN keyword as a placeholder for the runtime input value. For example, to make sure that any value is rounded to a multiple of 0.5, write:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ROUND(DOMAIN*2)/2\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can optionally combine this with a SQL condition in the Do Not Allow That field. If you do that, values that meet the Do Not Allow That condition will be subjected to the Make Sure That correction."}),"\n",(0,s.jsx)(n.p,{children:"You typically leave the Message field empty, but if you supply a Message, it is displayed as a Warning (not: an Error) message each time the constraint replaces an input value by the corrected value."}),"\n",(0,s.jsxs)(n.p,{children:["Now ",(0,s.jsx)(n.strong,{children:"have the constraint checked"}),'. This step is essential. See "Having the constraint checked\u201d later in this article.']}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(91891).A+"",width:"679",height:"368"})}),"\n",(0,s.jsx)(n.h3,{id:"having-the-constraint-checked",children:"Having the constraint checked"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Click the Check button."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If the domain constraint is correct, the checker will set the Correct = Yes flag."}),"\n",(0,s.jsx)(n.p,{children:"If the constraint is not correct, a message is shown with an asterisk (*) at the position of the syntax error. Review your SQL and then press Check again, until the constraint is correct."}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"This step is essential. Your constraint will NOT have an effect as long as Correct = No. When you create a .CON flatfile you are warned about the existence of incorrect constraints, but when you run from repository, as you are likely to do in Development, this behaviour can be confusing."})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Click Save to save work."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"You can switch constraints off by setting Active\xa0 = No. This can be practical for quick testing and debugging. Try not to release any inactive constraints. Even in Development, keep inactive constraints in Development to a minimum: switch them back on as soon as possible.\nIn summary, best practice is for all your constraints to have both Correct = Yes and Active = Yes."})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},20183:(e,n,t)=>{t.d(n,{A:()=>i});const i="data:image/png;base64,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"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(96540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},91891:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/06bc9124-2caf-4975-88d7-cd000cd4dab2-3d2af99ce73918ff2732340e6987ceef.png"}}]);