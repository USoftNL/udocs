"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[31620],{2248:(e,t,n)=>{n.d(t,{A:()=>s});const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAcCAMAAAA5tTN/AAAAV1BMVEX////z9vuNqdtehsxEcsRZgsuKp9rw9PphiM1bhMuQrNxojc/G1O3q8PmEotiVr91bg8vx9Pvd5vSjuuLk6/aww+b4+f28zOrW4PJxlNLO2u9mi85Wf8o8rHOIAAABEUlEQVRIx+2W2w6CMAyGq1bwsFEOGwz1/Z/T7qATA0ESZmJiL7aF/vvY/vZiAD8bm+0O1459ljv0YXWyjeOG2dskaMQTs8+J2GdmJ0Ij/tmzbGGbUhZIrvEJ3SRCshQVQN2gclv4swAvlNqTonScTUSq5S0dL0oEw1MfkrLVRN07m4UCLjiUjrN5qC2bMACeoaHxiyHbCg2UODzzlCetDp6Ei1L8L+fVCFs/7KMZT6oagyfhomVk92Qm2S/SSU+scNoTobxxPXSLPeGhUrGWbkNRxFrWNmlswfuXWopPa8kHf/agYyvle9BwD8oOsZGuURf24KrxZ3+dfU2EvjI7S8TOmJ3vk6Bv7hGRZ8neJ+niDjGRKvjoxqcfAAAAAElFTkSuQmCC"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var s=n(96540);const r={},i=s.createContext(r);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:t},e.children)}},31124:(e,t,n)=>{n.d(t,{A:()=>s});const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAaCAMAAADBqfHwAAABmFBMVEUAAABNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJNTUJaWlBsbGNnZ15OTkPj4+J8fHSysq7c3NpkZFqzs67b29nn5+XW1tS+vrqGhn/AwL3////x8fBxcWmsrKeHh4Dk5OLZ2dZ9fXV2dm1oaF7s7Ovl5ePQ0M7z8/O1tbB6enKOjoeTk4yJiYKAgHi8vLj4+Pjf393AwLzR0c7e3tygoJrh4d+FhX6xsayKioPV1dO6urZ0dGt/f3fOzsuhoZvT09G9vbns7Oqvr6rY2Naiop3MzMibm5Wjo53v7+7Hx8R+fnb+/v6lpaD4+Pfw8O+rq6aqqqXT09BcXFLa2tdxcWhRUUednZfX19WYmJLm5uWSkovl5eRtbWT8/Pz19fSkpJ7d3du/v7vn5+a3t7JdXVODg3uEhHy1tbH9/f22trHKysfLy8inp6Ktrainp6HPz8ywsKvJycWLi4Senph/f3hUVEqpqaNra2Lq6ulSUkdjY1lWVktlZVtWVkxTU0lpaWBeXlRPT0SCxIduAAAAD3RSTlMAQazpBJmaBUKt6q5DnZ4l/YOTAAABu0lEQVRIx8XVZ1PbQBAG4MNADDbhpZjeXmOqwXSHBAMJEEzvHVNimoCEQAqkkACh/u2cdGA+eRwPN5P9IO3O7Ty6045GQgiRYEvE0yPRliDMSErWgKl4ZpeePk6C8rAaOSBF2LR6qULHKB7DIbRywP/yMjKz4vWyXa4cINeVB+QXFBYVl5Q+rpWR7nKPJ1JXVFappKqoOqpH1kiPlaj1sq7ex4bIUiPZ1NxC933Z2ubnCzNpf0nG9F6hgwFZd3YB3e2v3/SgN0B/39t+uoNBq7OFVN4AY3qDHMIwOTIqc4xxfIKc7PVzyj89w6mZ2fveOeUBMb15LmBxieYOlkNkI1a4ijX6zF2tR3r/3ZuWHvAuGCYbNrgJ9HDrwSuMy4OX28AODewuy2qPq/tkBt4zrLwPXIrPO+DHwyM5SXzi0ecvXn7FMU9av9GjvHLy+w+r8acRoM+QDzcMst5YjOKdylVu/gK6zLmFh4HfkucBlIc+8sxq7DZfL0vUfMloHnB+sa+SP5dXKrm+sW6hkHm9ur1DjND+/Tq0cg6RqtVzihStXpoQzzVy6fL/ZtcHptutP3CaU8dQHE55WPEX1X6sEAztWfcAAAAASUVORK5CYII="},70368:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Extensions/JSON_internal_component/JSONExport","title":"JSON.Export","description":"This article is about the Export method of the JSON internal component.","source":"@site/docs/Extensions/JSON_internal_component/JSONExport.md","sourceDirName":"Extensions/JSON_internal_component","slug":"/Extensions/JSON_internal_component/JSONExport","permalink":"/udocs/Extensions/JSON_internal_component/JSONExport","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"JSONExport"},"sidebar":"sidebar","previous":{"title":"JSON internal component","permalink":"/udocs/Extensions/JSON_internal_component"},"next":{"title":"JSON.Import","permalink":"/udocs/Extensions/JSON_internal_component/JSONImport"}}');var r=n(74848),i=n(28453);const a={id:"JSONExport"},o="JSON.Export",l={},d=[{value:"<strong>JSON.Export</strong>",id:"jsonexport-1",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Encapsulation",id:"encapsulation",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"jsonexport",children:"JSON.Export"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(2248).A+"",width:"91",height:"28"})}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["This article is about the ",(0,r.jsx)(t.strong,{children:"Export"})," method of the ",(0,r.jsx)(t.a,{href:"/Extensions/JSON_internal_component",children:"JSON internal component"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"jsonexport-1",children:(0,r.jsx)(t.strong,{children:"JSON.Export"})}),"\n",(0,r.jsx)(t.p,{children:"Exports data to the USoft JSON format on the basis of a SELECT statement."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:n(31124).A+"",width:"79",height:"26"})}),"\n",(0,r.jsx)(t.p,{children:"Exports binary data (of the BLOB data type) to base64 encoding."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Syntax"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"INVOKE JSON.Export WITH\nSELECT      { *parameter-assignment* | *column-expression* } ...\nFROM        *table*\nORDER BY    *order-by-list*\n\n*parameter-assignment*  ::=  *value  parameter*\n\n*column-expression*     ::=\n\n  {    *column*        |\n       OLD( *column* ) |\n       *             |\n       OLD( * )      }\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The required SELECT clause must contain at least 1 item. Each item in this clause is either a ",(0,r.jsx)(t.em,{children:"parameter-assignment"})," or a ",(0,r.jsx)(t.em,{children:"column-expression"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Each ",(0,r.jsx)(t.em,{children:"parameter-assignment"})," is a value-name pair. The SECOND element is the name of a parameter. The FIRST element is the value assigned to that parameter. Please find ",(0,r.jsx)(t.em,{children:"values"})," and ",(0,r.jsx)(t.em,{children:"parameters"})," in the table below."]}),"\n",(0,r.jsxs)(t.p,{children:["Each ",(0,r.jsx)(t.em,{children:"column-expression"})," is either a literal column name or the SQL * (asterisk) wildcard. Column aliases are not supported. Other SQL functions than OLD() are NOT supported. The OLD() function is supported only if you call JSON.Export from constraint SQL. Even in constraint SQL, you cannot export both old value and new value for a column: you cannot use ",(0,r.jsx)(t.em,{children:"column"})," and OLD( ",(0,r.jsx)(t.em,{children:"column"})," ) for the same column in the same SELECT list."]}),"\n",(0,r.jsx)(t.p,{children:"It is customary, but not mandatory, to list value parameter pairs before column expressions. The order of the items in the SELECT clause determines the order of the attributes in the XML output. The optional ORDER BY clause determines the document order of the records in the JSON output."}),"\n",(0,r.jsx)(t.p,{children:"The required FROM clause must contain the name of exactly 1 table or logical view."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Example"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"INVOKE    JSON.Export WITH\nSELECT    'c:\\travel\\tours.json'  WriteOutputTo\n,         *\nFROM      tour\n"})}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.p,{children:["This table is sorted by ",(0,r.jsx)(t.em,{children:"parameter"})," and lists all value-parameter pairs supported in the SELECT output-lists passed to JSON.Export. The use of each parameter is optional. If you do not specify a given ",(0,r.jsx)(t.em,{children:"parameter"})," and it has a default ",(0,r.jsx)(t.em,{children:"value"})," corresponding to it, this is the value applied."]}),"\n",(0,r.jsxs)(t.p,{children:["Both ",(0,r.jsx)(t.em,{children:"value"})," and ",(0,r.jsx)(t.em,{children:"parameter"})," are case-insensitive."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"value"})})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.em,{children:(0,r.jsx)(t.strong,{children:"parameter"})})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.strong,{children:"Description"})})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{ yes\xa0 | no }"})}),(0,r.jsx)(t.td,{children:"AppendToFile"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"This parameter is used with the \"WriteOutputTo\" parameter. If you specify 'yes' for this parameter, the file is appended to. Otherwise, it is overwritten."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{ yes\xa0 | no }"})}),(0,r.jsx)(t.td,{children:"EmptyDocOnZeroRows"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"If set to 'no' (the default), if the SELECT statement of the JSON export does not return any rows, USoft returns an empty string. This makes it difficult to apply any transformation to the result of the JSON export."}),(0,r.jsx)("p",{children:"If set to \u2018yes\u2019, then the output is always a JSON object. If no rows are returned, this JSON object contains only a root tag with the same name as the info window name."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)("p",{children:(0,r.jsx)(t.code,{children:"{\xa0Array\xa0| Object }"})})}),(0,r.jsx)(t.td,{children:"Encapsulation"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"This parameter determines how the data is modelled (formatted) in JSON."}),(0,r.jsx)("p",{children:"If set to \u2018Array\u2019, data is modelled as an unnamed array of objects. Each object contains column names and column values of a retrieved record."}),(0,r.jsx)("p",{children:"If set to 'Object\u2019 (the default), these objects are encapsulated in a wrapper that contains the table name."}),(0,r.jsxs)("p",{children:["For examples, see the ",(0,r.jsx)(t.a,{href:"#encapsulation",children:"Encapsulation"})," section below."]})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{\xa0Insert\xa0|\xa0Delete\xa0|\xa0Update\xa0}"})}),(0,r.jsx)(t.td,{children:"ExecutionType"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsxs)("p",{children:["Specifies a ",(0,r.jsx)(t.a,{href:"/udocs/Repositories/USoft_JSON_format/Metainstruction_properties_in_JSON",children:"JSON meta-instruction property"})," that will be generated for each resulting row element."]}),(0,r.jsx)("p",{children:"A Delete instruction property is necessary if you want to delete the exported data from a target repository. Otherwise, ExecutionType has limited applicability. An Update tag is necessary if you want to identify records where a primary key value must be updated in a target repository, but you cannot use the ExecutionType parameter for this, because JSON.Export does not let you export old and new values of the same (primary key) column in 1 operation. Otherwise, the Update tag is only useful as a comment. The Insert tag is only ever useful as a comment."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{ yes\xa0 | no }"})}),(0,r.jsx)(t.td,{children:"LeadingZeroForDecimal"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsxs)("p",{children:["If you specify 'yes' for this parameter, numeric values returned from the database without a leading zero, such as '.30', will appear in your JSON result with a leading zero, as in '0.30'.",(0,r.jsx)("br",{}),"\t\t\tIf you specify 'no', they will appear without leading zero, as in '.30'."]})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)("p",{children:(0,r.jsx)(t.code,{children:"{\xa0Compact\xa0|  Indent\xa0|  Newline }"})})}),(0,r.jsx)(t.td,{children:"PrettyPrint"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"This parameter determines how whitespace is added to the JSON result data."}),(0,r.jsx)("p",{children:"If set to \u2018Compact\u2019, the result JSON is returned without whitespace formatting. This ensures minimal size."}),(0,r.jsxs)("p",{children:["If set to \u2018Indent\u2019, the result JSON contains inserted newline and indentation characters. This ensures an optimal level of readibility for humans. The indentation characters visualise how the JSON elements are nested. See the examples in the ",(0,r.jsx)(t.a,{href:"#encapsulation",children:"Encapsulation "}),"section below."]}),(0,r.jsx)("p",{children:"If set to 'Newline\u2019 (the default), the result JSON contains inserted newline characters, but not indentation characters. This ensures a limited level of readability for humans."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{ yes\xa0 | no }"})}),(0,r.jsx)(t.td,{children:"TrimSpaces"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"If set to \u2018yes\u2019, any trailing whitespace characters will be removed from the JSON result."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"{ yes\xa0 | no }"})}),(0,r.jsx)(t.td,{children:"UseIOFormats"}),(0,r.jsxs)(t.td,{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)(t.em,{children:"Value"})," is a string and must be quoted, as in the example earlier in this help topic."]}),(0,r.jsx)("p",{children:"If you specify 'yes' for this parameter, column values in the resulting XML output get the IO format of the corresponding domain. Otherwise they are written as they are retrieved from the database."})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsxs)(t.td,{children:[(0,r.jsx)("p",{children:(0,r.jsx)(t.em,{children:"USFile-alias"})}),(0,r.jsx)("p",{children:(0,r.jsx)(t.em,{children:"output-file-name"})})]}),(0,r.jsx)(t.td,{children:"WriteOutputTo"}),(0,r.jsxs)(t.td,{children:["This parameter is used to specify that the output is to be written directly to a file. It is possible to use a file which has previously been opened using the ",(0,r.jsx)(t.a,{href:"/udocs/Extensions/USFile_internal_component/USFileOpen",children:"USFile.Open"})," method. To do this, the alias used in the USFile.Open method must be specified, preceded by 'USFile.' If no USFile alias is specified, the JSON will be written directly to the file specified. If the file exists, it will be overwritten. To prevent this, use the 'AppendToFile' parameter. If specified, the method will return the file name."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"encapsulation",children:"Encapsulation"}),"\n",(0,r.jsxs)(t.p,{children:["This statement uses ",(0,r.jsx)(t.strong,{children:"Array"})," encapsulation:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"INVOKE JSON.Export WITH SELECT\n\t'Array' Encapsulation,\n\t'Indent' PrettyPrint,\n\t* FROM tour_programme\n"})}),"\n",(0,r.jsx)(t.p,{children:"and returns the following result:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-language-json",children:'[\n\t{\n\t\t"DESTINATION":"AUSTRALIA",\n\t\t"TOUR_TYPE":"ISLAND SUNTANNER",\n\t\t"NUM_DAYS":12,\n\t\t"MAX_AGE":65,\n\t\t"DESCRIPTION":"Exclusive sailing adventure to the Great Barrier Reef Two nights on Fraser Island - the world\'s largest sand island Hire of 4 wheel drive vehicles on Fraser Island A night at an outback cattle station Two nights on beautiful Great Keppel Island Tjapukai Aboriginal Dance Theatre"\n\t},\n\t{\n\t\t"DESTINATION":"AUSTRALIA",\n\t\t"TOUR_TYPE":"ROCK \'N\' ALICE",\n\t\t"NUM_DAYS":12,\n\t\t"MAX_AGE":0,\n\t\t"DESCRIPTION":"Uluru rock sighting Outback town of Alice Springs Entrance fees to Uluru National Park King\'s Canyon and the Olgas Western MacDonnell Ranges"\n\t}\n]\n'})}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsx)(t.p,{children:"This result data does not contain the name of the table that the records are exported from."})}),"\n",(0,r.jsxs)(t.p,{children:["This statement uses ",(0,r.jsx)(t.strong,{children:"Object"})," encapsulation:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"INVOKE JSON.Export WITH SELECT\n\t'Object' Encapsulation,\n\t'Indent' PrettyPrint,\n\t* FROM tour_programme\n"})}),"\n",(0,r.jsx)(t.p,{children:"and returns the following result:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-language-json",children:'{\n\t"TOUR_PROGRAMME": [\n\t\t{\n\t\t\t"DESTINATION":"AUSTRALIA",\n\t\t\t"TOUR_TYPE":"ISLAND SUNTANNER",\n\t\t\t"NUM_DAYS":12,\n\t\t\t"MAX_AGE":65,\n\t\t\t"DESCRIPTION":"Exclusive sailing adventure to the Great Barrier Reef Two nights on Fraser Island - the world\'s largest sand island Hire of 4 wheel drive vehicles on Fraser Island A night at an outback cattle station Two nights on beautiful Great Keppel Island Tjapukai Aboriginal Dance Theatre"\n\t\t},\n\t\t{\n\t\t\t"DESTINATION":"AUSTRALIA",\n\t\t\t"TOUR_TYPE":"ROCK \'N\' ALICE",\n\t\t\t"NUM_DAYS":12,\n\t\t\t"MAX_AGE":0,\n\t\t\t"DESCRIPTION":"Uluru rock sighting Outback town of Alice Springs Entrace fees to Uluru National Park King\'s Canyon and the Olgas Western MacDonnell Ranges"\n\t\t}\n\t]\n}\n'})}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsxs)(t.p,{children:["The latter format (with Encapsulation set to ",(0,r.jsx)(t.strong,{children:"Object"})," or left unspecified) is also the ",(0,r.jsx)(t.a,{href:"/udocs/Repositories/USoft_JSON_format/",children:"default USoft JSON format"}),". This is also the format output by ",(0,r.jsx)(t.a,{href:"/udocs/Extensions/JSON_internal_component/JSONMultiExportTables",children:"JSON.MultiExportTables()"}),"."]})})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);