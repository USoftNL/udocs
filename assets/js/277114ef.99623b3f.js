"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[59780],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var r=n(96540);const s={},a=r.createContext(s);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:t},e.children)}},93040:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_2","title":"Configuration example 2","description":"This example shows configuration of machine-specific access rights for administrator users (\'super users\') per computer.","source":"@site/docs/Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_2.md","sourceDirName":"Continuous_delivery/Understanding_USoft_Delivery_Manager","slug":"/Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_2","permalink":"/udocs/Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_2","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Configuration_example_2"},"sidebar":"sidebar","previous":{"title":"Configuration example 1","permalink":"/udocs/Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_1"},"next":{"title":"Configuration example 3","permalink":"/udocs/Continuous_delivery/Understanding_USoft_Delivery_Manager/Configuration_example_3"}}');var s=n(74848),a=n(28453);const i={id:"Configuration_example_2"},o="Configuration example 2",l={},h=[{value:"Overview of the example",id:"overview-of-the-example",level:3},{value:"Step 1: Release user-usergroup information",id:"step-1-release-user-usergroup-information",level:3},{value:"Step 2A: Mark up user-usergroup information",id:"step-2a-mark-up-user-usergroup-information",level:3},{value:"Step 2B: Mark up and tweak user-usergroup information",id:"step-2b-mark-up-and-tweak-user-usergroup-information",level:3},{value:"Step 3: Declare computers in registry",id:"step-3-declare-computers-in-registry",level:3},{value:"Step 4: Declare computer settings",id:"step-4-declare-computer-settings",level:3},{value:"Step 5: Substitute variables during deployment",id:"step-5-substitute-variables-during-deployment",level:3}];function d(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"configuration-example-2",children:"Configuration example 2"})}),"\n",(0,s.jsx)(t.p,{children:"This example shows configuration of machine-specific access rights for administrator users ('super users') per computer."}),"\n",(0,s.jsx)(t.p,{children:"This example illustrates the use of target variables in combination with added XSL. It is an example of configuration by variable substitution."}),"\n",(0,s.jsx)(t.h3,{id:"overview-of-the-example",children:"Overview of the example"}),"\n",(0,s.jsx)(t.p,{children:"The idea in this example is to distribute super-user access rights from Development."}),"\n",(0,s.jsx)(t.p,{children:"In Development, suppose there is a super-user called ADMIN_DEV. In each of the other environments, there is also 1 super-user, who can have a different name, but must have exactly the same access rights to the applications as ADMIN_DEV."}),"\n",(0,s.jsxs)(t.p,{children:["For each application known to USoft Authorizer, all the super-users must be assigned to the same usergroup as ADMIN_DEV in Development. Access rights for users ",(0,s.jsx)(t.em,{children:"other"})," than ADMIN_DEV are not deliverable: they are set locally and must not be affected by release operations."]}),"\n",(0,s.jsx)(t.h3,{id:"step-1-release-user-usergroup-information",children:"Step 1: Release user-usergroup information"}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0Create a task that has a task step that executes the Populate tables list action for Application = USAUTH."}),"\n",(0,s.jsx)(t.p,{children:"2.\xa0Run the task step. See that Authorizer tables have been imported in Delivery Manager (choose Define, Application Tables to see this)."}),"\n",(0,s.jsx)(t.p,{children:"3.\xa0See that by default, the T_AUTH_USER_USERGROUP table has Deliverable = No. For this table, set Deliverable = Yes. Save work."}),"\n",(0,s.jsx)(t.p,{children:"4.\xa0Create a task that has a task step that executes the Release deliverable appdata action for Application = USAUTH. An explanation of what is appdata and authdata is here."}),"\n",(0,s.jsxs)(t.p,{children:["5.\xa0Run the task step. See that in the ",(0,s.jsx)(t.strong,{children:"\\appdata"}),' subfolder of the release folder, in a file called "USAUTH.xml", all the Development informatino from the T_AUTH_USER_USERGROUP table has been exported to XML. The result should look something like this (relevant values in ',(0,s.jsx)(t.strong,{children:"bold"}),"):\xa0"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'...\n<T_AUTH_USER_USERGROUP APP_NAME="USD" USERGROUP="USD_ORA" USERNAME="ADMIN_DEV"/>\n<T_AUTH_USER_USERGROUP APP_NAME="MYAPP" USERGROUP="ADMIN" USERNAME="ADMIN_DEV"/>\n<T_AUTH_USER_USERGROUP APP_NAME="MYAPP" USERGROUP="MYAPPGRP" USERNAME="OTHER_USER"/>\n...\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-2a-mark-up-user-usergroup-information",children:"Step 2A: Mark up user-usergroup information"}),"\n",(0,s.jsxs)(t.p,{children:['This is a simple technique and an alternative to Step 2B. This step 2A only allows you to substitute the name "ADMIN_DEV" by the variable placeholder ',(0,s.jsx)(t.code,{children:"${SUPER_USER}."})," You cannot use it to remove the non-ADMIN_DEV records, although it is fairly easy to achieve this in a separate routine by adding XSL to the task step that delivers the authdata."]}),"\n",(0,s.jsx)(t.p,{children:"For full control over mark-up and tweak, use the more complex approach of Step 2B instead."}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0After the task step that releases the authdata, define a further task step that executes the Mark up XML attribute action. Set the following parameters for this action:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Parameter"})}),(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Value"})})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Replacement file"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"${release}\\appdata\\USAUTH.diff.xml"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Target element"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"T_AUTH_USER_USERGROUP"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Target attribute"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"USERNAME"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Key name"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"USERNAME"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Key value"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"ADMIN_DEV"})})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["2.\xa0Run the two task steps. See that in the ",(0,s.jsx)(t.strong,{children:"\\appdata"})," subfolder of the release folder, the authdata now looks something like this (relevant values are in ",(0,s.jsx)(t.strong,{children:"bold"}),"):\xa0"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'...\n<T_AUTH_USER_USERGROUP APP_NAME="USD" USERGROUP="USD_ORA" USERNAME="${SUPER_USER}"/>\n<T_AUTH_USER_USERGROUP APP_NAME="MYAPP" USERGROUP="ADMIN" USERNAME="${SUPER_USER}"/>\n<T_AUTH_USER_USERGROUP APP_NAME="MYAPP" USERGROUP="MYAPPGRP" USERNAME="OTHER_USER"/>\n...\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-2b-mark-up-and-tweak-user-usergroup-information",children:"Step 2B: Mark up and tweak user-usergroup information"}),"\n",(0,s.jsx)(t.p,{children:"This is an advanced technique and an alternative to Step 2A. If you only need to mark up the information and not (also) to tweak it, use the simpler Step 2A."}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0Run the Tools, Load Deploy Samples feature from the Delivery Manager menu. Details about this operation are here. An explanataion of what is a deploy script is here."}),"\n",(0,s.jsx)(t.p,{children:'2.\xa0Choose Define, Custom XSL. Find the "mark-up-xml-custom" sample XSL document and make a copy of it under a different name, say, "super-users".'}),"\n",(0,s.jsx)(t.p,{children:'3.\xa0Edit your "super-users" XSL transformation so that:'}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["For each of the T_AUTH_USER_USERGROUP records for the ADMIN_DEV user, the super-user name is turned into the ",(0,s.jsx)(t.code,{children:"${SUPER_USER}"})," target variable placeholder."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Records for users other than ADMIN_DEV are skipped."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The result could look something like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:'<?xml version="1.0" encoding="windows-1252"?>\n<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="no"/>\n\x3c!-- Infix placeholder ${SUPER_USER} \xa0--\x3e\n<xsl:template match="T_AUTH_USER_USERGROUP[@USERNAME=\'ADMIN_DEV\']/@USERNAME">\n \xa0<xsl:attribute name="{local-name()}">${SUPER_USER}</xsl:attribute>\n</xsl:template>\n\x3c!-- Skip data other than for super-user --\x3e\n<xsl:template match="T_AUTH_USER_USERGROUP[@USERNAME!=\'ADMIN_DEV\']"/>\n\x3c!-- \xa0Default template \xa0--\x3e\n<xsl:template match="*|@*|comment()|processing-instruction()|text()">\n \xa0<xsl:copy>\n \xa0 \xa0<xsl:apply-templates select="*|@*|text()|comment()|processing-instruction()"/>\n \xa0</xsl:copy>\n</xsl:template>\n</xsl:stylesheet>\n\n'})}),"\n",(0,s.jsx)(t.p,{children:"4.\xa0In the Define Tasks window (choose Define, Tasks), find the task step from Step 1 that releases the authdata, and in the Parameters box, set Added XSL = super-users. More information about added XSL is here."}),"\n",(0,s.jsxs)(t.p,{children:["5.\xa0Re-run the release task. See that in the ",(0,s.jsx)(t.strong,{children:"\\appdata"})," subfolder of the release folder, the authdata now looks something like this (relevant values are in ",(0,s.jsx)(t.strong,{children:"bold"}),"):\xa0"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'...\n<T_AUTH_USER_USERGROUP APP_NAME="USD" USERGROUP="USD_ORA" USERNAME="${SUPER_USER}"/>\n<T_AUTH_USER_USERGROUP APP_NAME="MYAPP" USERGROUP="ADMIN" USERNAME="${SUPER_USER}"/>\n...\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-3-declare-computers-in-registry",children:"Step 3: Declare computers in registry"}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0Run the Tools, Load Registry Samples feature from the Delivery Manager menu. Details about this operation are here. An explanation of what is a registry is here."}),"\n",(0,s.jsx)(t.p,{children:"2.\xa0Make sure you declare the different computers in the registry XML:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'...\n \xa0<Computers>\n \xa0 \xa0<Computer name="COMPUTER_1">\n \xa0 \xa0...\n \xa0 \xa0<Computer name="COMPUTER_2">\n \xa0 \xa0...\n\n'})}),"\n",(0,s.jsx)(t.p,{children:"3.\xa0Check that the Current Release (choose Release, Current Release) has Put Current Registry = Yes."}),"\n",(0,s.jsx)(t.p,{children:'4.\xa0Re-run the release task. See that your registry information is output to the release folder, to a file named "registry.xml".'}),"\n",(0,s.jsx)(t.h3,{id:"step-4-declare-computer-settings",children:"Step 4: Declare computer settings"}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0Choose Release, Computers and enter the computername of each of the computers. Save work."}),"\n",(0,s.jsxs)(t.p,{children:["2.\xa0Choose Release, Target variables and create a target variable named ",(0,s.jsx)(t.code,{children:"${SUPER_USER}"}),". Press the Populate button. For each computer, specify what the super user is called on that computer. Save work."]}),"\n",(0,s.jsx)(t.p,{children:'3.\xa0Re-run the release task. See that in the "release.xml" file, settings have been added describing super user names of different computers:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'...\n<Computers>\n \xa0<Computer name="COMPUTER_1">\n \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0<Setting name="${SUPER_USER}" value="ADMIN"/>\n \xa0 \xa0 \xa0...\n \xa0<Computer name="COMPUTER_2">\n \xa0 \xa0<Settings>\n \xa0 \xa0 \xa0<Setting name="${SUPER_USER}" value="SYSTEM"/>\n \xa0 \xa0 \xa0...\n\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-5-substitute-variables-during-deployment",children:"Step 5: Substitute variables during deployment"}),"\n",(0,s.jsx)(t.p,{children:"1.\xa0Check that you have an attachment (choose Release, Attachments) with File Name = deploy.xml and Section = appdata and Blocked = No."}),"\n",(0,s.jsx)(t.p,{children:"2.\xa0Check that the Current Release (choose Release, Current Release) has Include Attachments = Yes."}),"\n",(0,s.jsx)(t.p,{children:"3.\xa0Re-run the release task."}),"\n",(0,s.jsx)(t.p,{children:"4.\xa0Distribute the released folder-and-file structure to a target machine."}),"\n",(0,s.jsx)(t.p,{children:"5.\xa0Open the \"deploy.xml\" deploy script. Find the line responsible for variable substitution (search for 'settings' or 'replace')."}),"\n",(0,s.jsxs)(t.p,{children:['6.\xa0See that when you run the "deploy.xml" script, the local super user name is substituted when the ',(0,s.jsx)(t.code,{children:"T_AUTH_USER_USERGROUP"})," records are imported."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:"The first time you try to get this working, run the script but comment out the data import operation. That way, you can check that the substitution works correctly."})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);