"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[63733],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var r=n(96540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}},90305:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Repositories/Blend_directives/pcXmlImportApply","title":"pc:XmlImportApply","description":"This article is about the pc:XmlImportApply Blend directive.","source":"@site/docs/Repositories/Blend_directives/pcXmlImportApply.md","sourceDirName":"Repositories/Blend_directives","slug":"/Repositories/Blend_directives/pcXmlImportApply","permalink":"/udocs/Repositories/Blend_directives/pcXmlImportApply","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"pcXmlImportApply"},"sidebar":"sidebar","previous":{"title":"pc:XmlImport","permalink":"/udocs/Repositories/Blend_directives/pcXmlImport"},"next":{"title":"pc:ZipExtractFiles","permalink":"/udocs/Repositories/Blend_directives/pcZipExtractFiles"}}');var i=n(74848),s=n(28453);const o={id:"pcXmlImportApply"},a="pc",c={},l=[{value:"<strong>pc</strong>",id:"pc-1",level:2},{value:"Import format",id:"import-format",level:2},{value:"Return document",id:"return-document",level:2},{value:"Processing the return document",id:"processing-the-return-document",level:2}];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsxs)(t.h1,{id:"pc",children:["pc",":XmlImportApply"]})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["This article is about the ",(0,i.jsxs)(t.strong,{children:["pc",":XmlImportApply"]}),(0,i.jsx)(t.a,{href:"/Repositories/Blend_directives",children:" Blend directive"}),"."]})}),"\n",(0,i.jsx)(t.h2,{id:"pc-1",children:(0,i.jsxs)(t.strong,{children:["pc",":XmlImportApply"]})}),"\n",(0,i.jsx)(t.p,{children:"Builds a set of appdata or metadata from USoft Blend directives, then imports this data into a USoft repository."}),"\n",(0,i.jsxs)(t.p,{children:['"Apply" in the name of this directive refers to the fact that directives in the XML content (if any) are applied before the import itself is executed. To import one or more literal data sets, use pc',":XmlImport"," instead."]}),"\n",(0,i.jsx)(t.p,{children:'Returns an XML document. See the "Return document" section below.'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.em,{children:"Syntax"}),"\n\xa0"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'<pc:XmlImportApply\n     alias="*name-literal*"\n     commit="*commit-mode*"\n     assign:*variable*="*xpath*"\n\n*directive(s)*\n\n>\n\n*commit-mode*  :=  { commit | rollback }\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The required ",(0,i.jsx)(t.strong,{children:"alias"})," identifies the connection to the Rules Engine that you want to use. For aliases, see pc",":RunRulesService","."]}),"\n",(0,i.jsxs)(t.p,{children:["The optional ",(0,i.jsx)(t.em,{children:"commit-mode"}),' determines whether or not the operation is committed after import. Choose the "rollback" option for debugging purposes, in particular to find out if the external data violate any rules. In terms of data change, the net effect of running the operation with "rollback" is null.']}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.em,{children:"directive(s)"})," is a section of one or more USoft Blend directives from which the input data is built. This could be, for example, a ",(0,i.jsx)(t.code,{children:"<pc:copy-of ... >"})," directive. It is possible to build and import multiple data sets."]}),"\n",(0,i.jsx)(t.h2,{id:"import-format",children:"Import format"}),"\n",(0,i.jsxs)(t.p,{children:["The data to be imported must have the USoft single-table or multi-table XML format. This format is specified in USoft Definer Help. You can produce this format by calling sql",":DataTableSetExport"," as a Blend call as in:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"<pc:evaluate select=\"sql:DataTableSetExport($instance, '.*', 'c:\\temp\\myoutputfile.xml', '')\" />\n"})}),"\n",(0,i.jsx)(t.p,{children:"or by calling, from a USoft tool interface:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"INVOKE XML.MultiExportTables WITH SELECT regular-expression \u2026\n"})}),"\n",(0,i.jsx)(t.h2,{id:"return-document",children:"Return document"}),"\n",(0,i.jsx)(t.p,{children:"If the import is successful, the return document looks something like this."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<Participants documentName="Participants">\n  <PARTICIPANT RES_ID="179" PERSON_ID="144" INSURANCE="Y" DIET="Vegetarian" WITHDRAWAL_DATE="" />\n</Participants>\n'})}),"\n",(0,i.jsx)(t.p,{children:"This is potentially different from the input data, because the return document is a report of record values as they appear, or would appear, after constraints are applied. For example, if a business rule causes the INSURANCE flag for the imported record to be set to 'Y', the return data has INSURANCE='Y' but the input data has INSURANCE='N'."}),"\n",(0,i.jsx)(t.p,{children:'If you pass commit="commit", the return document reflects the database state. If you pass commit="rollback" (the default), the return document reflects what the database state would be if you had committed.'}),"\n",(0,i.jsx)(t.h2,{id:"processing-the-return-document",children:"Processing the return document"}),"\n",(0,i.jsxs)(t.p,{children:["By specifying the optional assign",":variable"," attribute, you can apply an xpath-expression to the return document and store the result in variable:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'assign:*variable*="*xpath-expression*"\n'})}),"\n",(0,i.jsx)(t.p,{children:"If you have been importing multiple documents successfully, each of the imported results is queued in the variable. The results may be dequeued one-by-one."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);