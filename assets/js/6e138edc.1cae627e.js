"use strict";(self.webpackChunkudocs=self.webpackChunkudocs||[]).push([[38902],{9059:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"Web_and_app_UIs/UDB_udb/udbinput","title":"$.udb.input()","description":"----","source":"@site/docs/Web_and_app_UIs/UDB_udb/udbinput.md","sourceDirName":"Web_and_app_UIs/UDB_udb","slug":"/Web_and_app_UIs/UDB_udb/udbinput","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbinput","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"USoft11","permalink":"/udocs/tags/u-soft-11"},{"inline":true,"label":"USoft10","permalink":"/udocs/tags/u-soft-10"}],"version":"current","frontMatter":{"id":"udbinput","tags":["USoft11","USoft10"]},"sidebar":"sidebar","previous":{"title":"$.udb.hostvars","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbhostvars"},"next":{"title":"$.udb.isCommitted()","permalink":"/udocs/Web_and_app_UIs/UDB_udb/udbisCommitted"}}');var s=n(74848),a=n(28453);const l={id:"udbinput",tags:["USoft11","USoft10"]},d="$.udb.input()",o={},r=[{value:"<strong>$.udb.input()</strong>",id:"udbinput-1",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"udbinput",children:"$.udb.input()"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"USoft 11``{.vs_11}"})}),"\n",(0,s.jsx)(t.admonition,{type:"danger",children:(0,s.jsxs)(t.p,{children:["This article describes the USoft 10 product only.\nIn USoft 11, the web UI API was revised and improved. For full details, go to:\n",(0,s.jsx)(t.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/Revised_web_UI_API_in_USoft_11",children:"Revised web UI API in USoft 11"})]})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"USoft 10``{.vs_10}"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["This article is about the ",(0,s.jsx)(t.strong,{children:"input()"})," function of the ",(0,s.jsx)(t.a,{href:"/Web_and_app_UIs/UDB_udb",children:"udb object"}),"."]})}),"\n",(0,s.jsx)(t.h2,{id:"udbinput-1",children:(0,s.jsx)(t.strong,{children:"$.udb.input()"})}),"\n",(0,s.jsx)(t.p,{children:"Displays a message to the user and a variety of input fields for user input. These input fields can then be validated and processed. Input dialogs of this type have many uses, ranging from configuration dialogs, and login dialogs to practically anything that requires user input."}),"\n",(0,s.jsx)(t.p,{children:"Calling .input() while a dialog is already being displayed will result in this existing dialog being removed entirely and rendering its input values null and void: they will not get validated or processed."}),"\n",(0,s.jsxs)(t.p,{children:["Returns a customised Promise object if ",(0,s.jsx)(t.em,{children:"promise"})," is true (the default). Otherwise, returns \u2018undefined\u2019."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["$.udb.input() is similar to ",(0,s.jsx)(t.a,{href:"/udocs/Web_and_app_UIs/UDB_udb/udbdialog",children:"$.udb.dialog()"})," but more complex:"]})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Syntax"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"$.udb.input( { *dialog-control-name* | *caller-block* } )\n\n*caller-block*  ::=  \n  {\n       promise: *promise*,\n       validate:  *validate-input-fn*,\n       message:  *dialog-message*,\n       title:  *dialog-title*,\n       fields:  *fields-array*,\n       buttons:  *buttons*,\n       width:  *width*,\n       useOpacity:  *use-opacity*,\n       closeButton:  *close-button*\n  }\n\n*promise* ::= { true | false }\n\n*fields-array*   ::=  *field-object*, [*field-object*...]\n*field-object*   ::=\n         {\n              id: *field-id*,\n              prompt: *field-prompt*,\n              type: *field-type*,\n              value: *field-value*,\n              height: *field-height*,\n              maxlength: *field-max-length*,\n              allowedValues: *field-allowed-values*,\n              help: *field-helpinfo-text*,\n              func: *field-custom-fn*\n         }\n*field-type*            ::=  { text     | password | textarea |\n                                    checkbox | radio    | select   |\n                                    static | htmlarea }\n*field-height*          ::=  *integer*\n*field-max-length*      ::=  *integer*\n\n*field-allowed-values*  ::=  *field-allowed-value* [, *field-allowed-value* ...]\n*field-allowed-value*   ::=  { *value* | *prompted-value* }\n*prompted-value*        ::=  prompt: *value-prompt*, value: *value*\n\n*buttons*        ::=  *button* [, *button* ...]\n*button*         ::=  { *string* | *button-object* }\n\n*width*          ::=  *integer*\n*use-opacity*    ::=  { true | false }\n*close-button*   ::=  { true | false }\n\n.*input-promise-chain-keyword*(function(*result*){ ... }\n\n*input-promise-chain-keyword*  ::= { then | catch | finally | validate }\n\n*result*  ::= {\n   answer: *answer*,\n   fields: *fields-array*,\n   caller: *caller-block*\n}\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You must pass either a ",(0,s.jsx)(t.em,{children:"dialog-control-name"})," which is a string, or a ",(0,s.jsx)(t.em,{children:"caller-block"})," which is a JSON object containing the properties listed (with all the items except 'message' being optional)."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Validate-input-fn"}),' is a function that is called when the user presses a dialog button that causes the dialog to close. The function is used to validate the input fields and receives the pressed button\u2019s "Id" value and the values of all the fields. Validation can result in the function returning false (i.e. validation failed). In that case, the dialog is kept open. In any other case, the dialog is closed. It is possible to use ',(0,s.jsx)(t.em,{children:"validate-input-fn"})," to process the input values as well, but you can also do that in the .then() clause of the Promise instead. Instead of passing ",(0,s.jsx)(t.em,{children:"validate-input-fn"})," as an option, you can chain it as a .validate() function, in the same way that you can chain .then() and .catch() with a Promise."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"validate-input-fn"})," and any ensuing .then() and .close() Promise functions do NOT execute if you have closeButton: true and the user closes the dialog by clicking the close icon ( 'X' ) in the top-right corner."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Dialog-message"})," is the message that the dialog must display. This can be either a string, or an object with a message parameter string and an optional params array. Both options are processed by the translation engine to create the required end user message. Passing an empty message (or omitting it) will result in no dialog being displayed."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Dialog-title"})," is the title of the dialog. Its default value is\xa0 \"Data input\". The title is displayed in a title bar at the top of the dialog. If set to '\xa0' (the empty string), this title bar will not be displayed.\xa0 In the same way as with dialog-message, the title can be either a string, or an object with a message parameter string with an optional params array, and both are processed by the translation engine to create the required title string."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Fields-array"})," is an array of one or more input field definitions. Each field is a JSON object, a ",(0,s.jsx)(t.em,{children:"field-object"}),". A ",(0,s.jsx)(t.em,{children:"field-object"})," must have specific parameters to work correctly. The parameters may differ from one ",(0,s.jsx)(t.em,{children:"field-object"})," to the next."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-id"})," is a string that identifies the field in the generated dialog. If omitted, the value becomes \u2018field\u2019 followed by the array index of this ",(0,s.jsx)(t.em,{children:"field-object"}),", eg., \u2018field1\u2019."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-prompt"})," is the string displayed alongside the input field. If left empty, the value of ",(0,s.jsx)(t.em,{children:"field-id"})," is used."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-type"})," is the type of the input field. The default is \u2018text\u2019. Field types are:"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{}),(0,s.jsx)(t.th,{})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"text"}),(0,s.jsx)(t.td,{children:"Text box"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"password"}),(0,s.jsx)(t.td,{children:"Password box"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"textarea"}),(0,s.jsx)(t.td,{children:"Multi-line text area"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"checkbox"}),(0,s.jsx)(t.td,{children:"Checkbox"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"radio"}),(0,s.jsx)(t.td,{children:"Radio button group"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"select"}),(0,s.jsx)(t.td,{children:"Dropdown list"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"static"}),(0,s.jsx)(t.td,{children:"Read-only field showing regular text string"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"htmlarea"}),(0,s.jsx)(t.td,{children:"Read-only field showing HTML-formatted text string"})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-value"})," is the initial value of the input field. The default is the empty string."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-height"})," is the height of the field; this is used for customised fields and for multi-line fields such as text areas. By default, the height is automatically calculated, which means the value \u2018auto\u2019 is used for the\xa0 field."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-max-length"})," is the maximum number of characters the field is allowed to contain. This applies only to text boxes, password boxes and multi-line text areas. If not specified, there is no maximum."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-allowed-values"})," is an array with all the possible values this field may have. This applies to selection input fields: radio button groups and dropdown lists. You can supply simple text strings or you can supply a name-value pair that represents a prompt with a value."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-helpinfo-text"})," is a text that appears when the user hovers the mouse above a question mark icon to the right of the input field. This text is used to further explain the meaning or usage of the input field. If omitted (which is the default), the text is empty, and the question mark icon is not shown."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Field-custom-fn"})," is a function that can be used to further customise the behaviour of an input field, eg., to add behaviour that it normally does not have. This allows you, for example, to add autocompletion features to a text input field. ",(0,s.jsx)(t.em,{children:"Field-custom-fn"})," receives the generated HTML object and the field object as its parameters."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Buttons"})," is an array of button definitions for one or more buttons displayed at the bottom of the dialog. For each button you can pass either a string value or a button object:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"If a string is passed, its value will be used for the button's \"Id\" attribute and for the button's text label (which is also processed by the translation engine)."}),"\n",(0,s.jsx)(t.li,{children:'If a button object is passed, its parameters will be used to create a customised button. The syntax of these button objects is the same as for the .usdialog() framework API function. The default is a single "OK" button without any special customisation.'}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Use-opacity"})," is a boolean that determines if the dialog is displayed as a modal dialog, in which case an Opacity Control is displayed behind the dialog so that anything on the underlying page becomes inaccessible. The dialog is modal if use-opacity is true (the default), and non-modal otherwise."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Close-button"})," is a boolean that determines if a close icon ( 'X' ) is displayed in the top-right corner of the dialog."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Input-promise-chain-keyword"})," applies only if ",(0,s.jsx)(t.em,{children:"promise"})," is true. You can pass a function with a ",(0,s.jsx)(t.em,{children:"result"})," parameter to a ",(0,s.jsx)(t.strong,{children:".then()"}),", ",(0,s.jsx)(t.strong,{children:".catch()"})," or ",(0,s.jsx)(t.strong,{children:".finally()"})," clause in a promise chain. You can also have a ",(0,s.jsx)(t.strong,{children:".validate()"})," clause with the same purpose as ",(0,s.jsx)(t.em,{children:"validate-input-fn"})," in the caller block (use one or the other, but not both)."]}),"\n",(0,s.jsxs)(t.p,{children:["As the Example shows, you can then get from the *result.*",(0,s.jsx)(t.strong,{children:"answer"})," property the id of the button that the user pressed, and from *result.*",(0,s.jsx)(t.strong,{children:"fields"})," an array of objects equal to the fields option passed to the $.udb.input function, with a current value filled out for each array member. You can get from ",(0,s.jsx)(t.em,{children:"result"}),".",(0,s.jsx)(t.strong,{children:"caller"})," the ",(0,s.jsx)(t.em,{children:"caller-block"})," that $.udb.input() was called with."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Example"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'$.udb.input({\n    title: "Log In",\n    message: "Please enter your credentials",\n    buttons: ["Log In", "Cancel"],\n    fields: [   { id: \'user\', prompt: \'User name\', type: \'text\' },\n                { id: \'cred\', prompt: \'Password\', type: \'password\' }\n            ]\n}).validate(function(result) {\n    if (result.answer === "Log In") {\n        var user = result.fields[0].value;\n        var pwd = result.fields[1].value;\n        if (!user || !pwd) {\n            $.udb.dialog({message: "You must enter a username and password"});\n            return false;\n        }\n        if (!pwd || pwd.length < 4) {\n            $.udb.dialog({message: "Passwords are at least 4 characters long"});\n            return false;\n        }\n    }\n}).then(function(result) {\n    var user = result.fields[0].value;\n    var pwd = result.fields[1].value;\n    if (result.answer === "Log In")\n        $.udb.login(user, pwd)\n            .then(function() {\n                $.udb.dialog({message: "Login successful"});\n            })\n            .catch(function() {\n                $.udb.dialog({message: "Login failed"});\n            });\n});\n'})}),"\n",(0,s.jsx)(t.p,{children:"\xa0"})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>d});var i=n(96540);const s={},a=i.createContext(s);function l(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);